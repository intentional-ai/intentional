
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../reference/">
      
      
        <link rel="next" href="../../plugins/intentional-fastapi/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.49">
    
    
      
        <title>Core Package - Intentional</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.6f8fc17f.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#api-reference-core-package" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Intentional" class="md-header__button md-logo" aria-label="Intentional" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Intentional
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Core Package
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/intentional-ai/intentional" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Intentional" class="md-nav__button md-logo" aria-label="Intentional" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Intentional
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/intentional-ai/intentional" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../home/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../installation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installation
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../concepts/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    High-level Concepts
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../config-file/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configuration File
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../plugins/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Plugins
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" checked>
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    API Reference
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            API Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Main Package
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Core Package
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Core Package
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#intentional-core" class="md-nav__link">
    <span class="md-ellipsis">
      intentional-core
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#intentional-core.src" class="md-nav__link">
    <span class="md-ellipsis">
      src
    </span>
  </a>
  
    <nav class="md-nav" aria-label="src">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#intentional-core.src.intentional_core" class="md-nav__link">
    <span class="md-ellipsis">
      intentional_core
    </span>
  </a>
  
    <nav class="md-nav" aria-label="intentional_core">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#intentional-core.src.intentional_core.__about__" class="md-nav__link">
    <span class="md-ellipsis">
      __about__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#intentional-core.src.intentional_core.bot_interface" class="md-nav__link">
    <span class="md-ellipsis">
      bot_interface
    </span>
  </a>
  
    <nav class="md-nav" aria-label="bot_interface">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#intentional-core.src.intentional_core.bot_interface.BotInterface" class="md-nav__link">
    <span class="md-ellipsis">
      BotInterface
    </span>
  </a>
  
    <nav class="md-nav" aria-label="BotInterface">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#intentional-core.src.intentional_core.bot_interface.BotInterface.name" class="md-nav__link">
    <span class="md-ellipsis">
      name
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#intentional-core.src.intentional_core.bot_interface.BotInterface.run" class="md-nav__link">
    <span class="md-ellipsis">
      run
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#intentional-core.src.intentional_core.bot_interface.load_bot_interface_from_dict" class="md-nav__link">
    <span class="md-ellipsis">
      load_bot_interface_from_dict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#intentional-core.src.intentional_core.bot_interface.load_configuration_file" class="md-nav__link">
    <span class="md-ellipsis">
      load_configuration_file
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#intentional-core.src.intentional_core.bot_structures" class="md-nav__link">
    <span class="md-ellipsis">
      bot_structures
    </span>
  </a>
  
    <nav class="md-nav" aria-label="bot_structures">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#intentional-core.src.intentional_core.bot_structures.bot_structure" class="md-nav__link">
    <span class="md-ellipsis">
      bot_structure
    </span>
  </a>
  
    <nav class="md-nav" aria-label="bot_structure">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#intentional-core.src.intentional_core.bot_structures.bot_structure.BotStructure" class="md-nav__link">
    <span class="md-ellipsis">
      BotStructure
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#intentional-core.src.intentional_core.bot_structures.bot_structure.load_bot_structure_from_dict" class="md-nav__link">
    <span class="md-ellipsis">
      load_bot_structure_from_dict
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#intentional-core.src.intentional_core.bot_structures.direct_to_llm" class="md-nav__link">
    <span class="md-ellipsis">
      direct_to_llm
    </span>
  </a>
  
    <nav class="md-nav" aria-label="direct_to_llm">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#intentional-core.src.intentional_core.bot_structures.direct_to_llm.DirectToLLMBotStructure" class="md-nav__link">
    <span class="md-ellipsis">
      DirectToLLMBotStructure
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#intentional-core.src.intentional_core.end_conversation" class="md-nav__link">
    <span class="md-ellipsis">
      end_conversation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="end_conversation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#intentional-core.src.intentional_core.end_conversation.EndConversationTool" class="md-nav__link">
    <span class="md-ellipsis">
      EndConversationTool
    </span>
  </a>
  
    <nav class="md-nav" aria-label="EndConversationTool">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#intentional-core.src.intentional_core.end_conversation.EndConversationTool.run" class="md-nav__link">
    <span class="md-ellipsis">
      run
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#intentional-core.src.intentional_core.events" class="md-nav__link">
    <span class="md-ellipsis">
      events
    </span>
  </a>
  
    <nav class="md-nav" aria-label="events">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#intentional-core.src.intentional_core.events.EventEmitter" class="md-nav__link">
    <span class="md-ellipsis">
      EventEmitter
    </span>
  </a>
  
    <nav class="md-nav" aria-label="EventEmitter">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#intentional-core.src.intentional_core.events.EventEmitter.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#intentional-core.src.intentional_core.events.EventEmitter.emit" class="md-nav__link">
    <span class="md-ellipsis">
      emit
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#intentional-core.src.intentional_core.events.EventListener" class="md-nav__link">
    <span class="md-ellipsis">
      EventListener
    </span>
  </a>
  
    <nav class="md-nav" aria-label="EventListener">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#intentional-core.src.intentional_core.events.EventListener.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#intentional-core.src.intentional_core.events.EventListener.add_event_handler" class="md-nav__link">
    <span class="md-ellipsis">
      add_event_handler
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#intentional-core.src.intentional_core.events.EventListener.handle_event" class="md-nav__link">
    <span class="md-ellipsis">
      handle_event
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#intentional-core.src.intentional_core.intent_routing" class="md-nav__link">
    <span class="md-ellipsis">
      intent_routing
    </span>
  </a>
  
    <nav class="md-nav" aria-label="intent_routing">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#intentional-core.src.intentional_core.intent_routing.IntentRouter" class="md-nav__link">
    <span class="md-ellipsis">
      IntentRouter
    </span>
  </a>
  
    <nav class="md-nav" aria-label="IntentRouter">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#intentional-core.src.intentional_core.intent_routing.IntentRouter.current_stage" class="md-nav__link">
    <span class="md-ellipsis">
      current_stage
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#intentional-core.src.intentional_core.intent_routing.IntentRouter.get_external_transitions" class="md-nav__link">
    <span class="md-ellipsis">
      get_external_transitions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#intentional-core.src.intentional_core.intent_routing.IntentRouter.get_prompt" class="md-nav__link">
    <span class="md-ellipsis">
      get_prompt
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#intentional-core.src.intentional_core.intent_routing.IntentRouter.run" class="md-nav__link">
    <span class="md-ellipsis">
      run
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#intentional-core.src.intentional_core.intent_routing.Stage" class="md-nav__link">
    <span class="md-ellipsis">
      Stage
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#intentional-core.src.intentional_core.llm_client" class="md-nav__link">
    <span class="md-ellipsis">
      llm_client
    </span>
  </a>
  
    <nav class="md-nav" aria-label="llm_client">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#intentional-core.src.intentional_core.llm_client.LLMClient" class="md-nav__link">
    <span class="md-ellipsis">
      LLMClient
    </span>
  </a>
  
    <nav class="md-nav" aria-label="LLMClient">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#intentional-core.src.intentional_core.llm_client.LLMClient.name" class="md-nav__link">
    <span class="md-ellipsis">
      name
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#intentional-core.src.intentional_core.llm_client.LLMClient.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#intentional-core.src.intentional_core.llm_client.LLMClient.connect" class="md-nav__link">
    <span class="md-ellipsis">
      connect
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#intentional-core.src.intentional_core.llm_client.LLMClient.disconnect" class="md-nav__link">
    <span class="md-ellipsis">
      disconnect
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#intentional-core.src.intentional_core.llm_client.LLMClient.handle_interruption" class="md-nav__link">
    <span class="md-ellipsis">
      handle_interruption
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#intentional-core.src.intentional_core.llm_client.LLMClient.run" class="md-nav__link">
    <span class="md-ellipsis">
      run
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#intentional-core.src.intentional_core.llm_client.LLMClient.send" class="md-nav__link">
    <span class="md-ellipsis">
      send
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#intentional-core.src.intentional_core.llm_client.load_llm_client_from_dict" class="md-nav__link">
    <span class="md-ellipsis">
      load_llm_client_from_dict
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#intentional-core.src.intentional_core.tools" class="md-nav__link">
    <span class="md-ellipsis">
      tools
    </span>
  </a>
  
    <nav class="md-nav" aria-label="tools">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#intentional-core.src.intentional_core.tools.Tool" class="md-nav__link">
    <span class="md-ellipsis">
      Tool
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Tool">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#intentional-core.src.intentional_core.tools.Tool.run" class="md-nav__link">
    <span class="md-ellipsis">
      run
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#intentional-core.src.intentional_core.tools.ToolParameter" class="md-nav__link">
    <span class="md-ellipsis">
      ToolParameter
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#intentional-core.src.intentional_core.tools.load_tools_from_dict" class="md-nav__link">
    <span class="md-ellipsis">
      load_tools_from_dict
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#intentional-core.src.intentional_core.utils" class="md-nav__link">
    <span class="md-ellipsis">
      utils
    </span>
  </a>
  
    <nav class="md-nav" aria-label="utils">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#intentional-core.src.intentional_core.utils.importing" class="md-nav__link">
    <span class="md-ellipsis">
      importing
    </span>
  </a>
  
    <nav class="md-nav" aria-label="importing">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#intentional-core.src.intentional_core.utils.importing.import_all_plugins" class="md-nav__link">
    <span class="md-ellipsis">
      import_all_plugins
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#intentional-core.src.intentional_core.utils.importing.import_plugin" class="md-nav__link">
    <span class="md-ellipsis">
      import_plugin
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#intentional-core.src.intentional_core.utils.inheritance" class="md-nav__link">
    <span class="md-ellipsis">
      inheritance
    </span>
  </a>
  
    <nav class="md-nav" aria-label="inheritance">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#intentional-core.src.intentional_core.utils.inheritance.inheritors" class="md-nav__link">
    <span class="md-ellipsis">
      inheritors
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_3" >
        
          
          <label class="md-nav__link" for="__nav_6_3" id="__nav_6_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Plugins
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_3">
            <span class="md-nav__icon md-icon"></span>
            Plugins
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_3_1" >
        
          
          <label class="md-nav__link" for="__nav_6_3_1" id="__nav_6_3_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    FastAPI
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_6_3_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_3_1">
            <span class="md-nav__icon md-icon"></span>
            FastAPI
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../plugins/intentional-fastapi/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Getting Started
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../plugins/intentional-fastapi/docs/reference/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    API Reference
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_3_2" >
        
          
          <label class="md-nav__link" for="__nav_6_3_2" id="__nav_6_3_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    OpenAI
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_6_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_3_2">
            <span class="md-nav__icon md-icon"></span>
            OpenAI
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../plugins/intentional-openai/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Getting Started
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../plugins/intentional-openai/docs/reference/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    API Reference
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_3_3" >
        
          
          <label class="md-nav__link" for="__nav_6_3_3" id="__nav_6_3_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Pipecat
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_6_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_3_3">
            <span class="md-nav__icon md-icon"></span>
            Pipecat
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../plugins/intentional-pipecat/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Getting Started
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../plugins/intentional-pipecat/docs/reference/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    API Reference
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_3_4" >
        
          
          <label class="md-nav__link" for="__nav_6_3_4" id="__nav_6_3_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Telegram UI
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_6_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_3_4">
            <span class="md-nav__icon md-icon"></span>
            Telegram UI
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../plugins/intentional-telegram/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Getting Started
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../plugins/intentional-telegram/docs/reference/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    API Reference
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_3_5" >
        
          
          <label class="md-nav__link" for="__nav_6_3_5" id="__nav_6_3_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Terminal
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_6_3_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_3_5">
            <span class="md-nav__icon md-icon"></span>
            Terminal
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../plugins/intentional-terminal/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Getting Started
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../plugins/intentional-terminal/docs/reference/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    API Reference
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_3_6" >
        
          
          <label class="md-nav__link" for="__nav_6_3_6" id="__nav_6_3_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Textual UI
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_6_3_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_3_6">
            <span class="md-nav__icon md-icon"></span>
            Textual UI
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../plugins/intentional-textual-ui/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Getting Started
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../plugins/intentional-textual-ui/docs/reference/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    API Reference
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../CONTRIBUTING/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Contribute
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../cla/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CLA
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#intentional-core" class="md-nav__link">
    <span class="md-ellipsis">
      intentional-core
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#intentional-core.src" class="md-nav__link">
    <span class="md-ellipsis">
      src
    </span>
  </a>
  
    <nav class="md-nav" aria-label="src">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#intentional-core.src.intentional_core" class="md-nav__link">
    <span class="md-ellipsis">
      intentional_core
    </span>
  </a>
  
    <nav class="md-nav" aria-label="intentional_core">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#intentional-core.src.intentional_core.__about__" class="md-nav__link">
    <span class="md-ellipsis">
      __about__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#intentional-core.src.intentional_core.bot_interface" class="md-nav__link">
    <span class="md-ellipsis">
      bot_interface
    </span>
  </a>
  
    <nav class="md-nav" aria-label="bot_interface">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#intentional-core.src.intentional_core.bot_interface.BotInterface" class="md-nav__link">
    <span class="md-ellipsis">
      BotInterface
    </span>
  </a>
  
    <nav class="md-nav" aria-label="BotInterface">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#intentional-core.src.intentional_core.bot_interface.BotInterface.name" class="md-nav__link">
    <span class="md-ellipsis">
      name
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#intentional-core.src.intentional_core.bot_interface.BotInterface.run" class="md-nav__link">
    <span class="md-ellipsis">
      run
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#intentional-core.src.intentional_core.bot_interface.load_bot_interface_from_dict" class="md-nav__link">
    <span class="md-ellipsis">
      load_bot_interface_from_dict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#intentional-core.src.intentional_core.bot_interface.load_configuration_file" class="md-nav__link">
    <span class="md-ellipsis">
      load_configuration_file
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#intentional-core.src.intentional_core.bot_structures" class="md-nav__link">
    <span class="md-ellipsis">
      bot_structures
    </span>
  </a>
  
    <nav class="md-nav" aria-label="bot_structures">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#intentional-core.src.intentional_core.bot_structures.bot_structure" class="md-nav__link">
    <span class="md-ellipsis">
      bot_structure
    </span>
  </a>
  
    <nav class="md-nav" aria-label="bot_structure">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#intentional-core.src.intentional_core.bot_structures.bot_structure.BotStructure" class="md-nav__link">
    <span class="md-ellipsis">
      BotStructure
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#intentional-core.src.intentional_core.bot_structures.bot_structure.load_bot_structure_from_dict" class="md-nav__link">
    <span class="md-ellipsis">
      load_bot_structure_from_dict
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#intentional-core.src.intentional_core.bot_structures.direct_to_llm" class="md-nav__link">
    <span class="md-ellipsis">
      direct_to_llm
    </span>
  </a>
  
    <nav class="md-nav" aria-label="direct_to_llm">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#intentional-core.src.intentional_core.bot_structures.direct_to_llm.DirectToLLMBotStructure" class="md-nav__link">
    <span class="md-ellipsis">
      DirectToLLMBotStructure
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#intentional-core.src.intentional_core.end_conversation" class="md-nav__link">
    <span class="md-ellipsis">
      end_conversation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="end_conversation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#intentional-core.src.intentional_core.end_conversation.EndConversationTool" class="md-nav__link">
    <span class="md-ellipsis">
      EndConversationTool
    </span>
  </a>
  
    <nav class="md-nav" aria-label="EndConversationTool">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#intentional-core.src.intentional_core.end_conversation.EndConversationTool.run" class="md-nav__link">
    <span class="md-ellipsis">
      run
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#intentional-core.src.intentional_core.events" class="md-nav__link">
    <span class="md-ellipsis">
      events
    </span>
  </a>
  
    <nav class="md-nav" aria-label="events">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#intentional-core.src.intentional_core.events.EventEmitter" class="md-nav__link">
    <span class="md-ellipsis">
      EventEmitter
    </span>
  </a>
  
    <nav class="md-nav" aria-label="EventEmitter">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#intentional-core.src.intentional_core.events.EventEmitter.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#intentional-core.src.intentional_core.events.EventEmitter.emit" class="md-nav__link">
    <span class="md-ellipsis">
      emit
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#intentional-core.src.intentional_core.events.EventListener" class="md-nav__link">
    <span class="md-ellipsis">
      EventListener
    </span>
  </a>
  
    <nav class="md-nav" aria-label="EventListener">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#intentional-core.src.intentional_core.events.EventListener.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#intentional-core.src.intentional_core.events.EventListener.add_event_handler" class="md-nav__link">
    <span class="md-ellipsis">
      add_event_handler
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#intentional-core.src.intentional_core.events.EventListener.handle_event" class="md-nav__link">
    <span class="md-ellipsis">
      handle_event
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#intentional-core.src.intentional_core.intent_routing" class="md-nav__link">
    <span class="md-ellipsis">
      intent_routing
    </span>
  </a>
  
    <nav class="md-nav" aria-label="intent_routing">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#intentional-core.src.intentional_core.intent_routing.IntentRouter" class="md-nav__link">
    <span class="md-ellipsis">
      IntentRouter
    </span>
  </a>
  
    <nav class="md-nav" aria-label="IntentRouter">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#intentional-core.src.intentional_core.intent_routing.IntentRouter.current_stage" class="md-nav__link">
    <span class="md-ellipsis">
      current_stage
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#intentional-core.src.intentional_core.intent_routing.IntentRouter.get_external_transitions" class="md-nav__link">
    <span class="md-ellipsis">
      get_external_transitions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#intentional-core.src.intentional_core.intent_routing.IntentRouter.get_prompt" class="md-nav__link">
    <span class="md-ellipsis">
      get_prompt
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#intentional-core.src.intentional_core.intent_routing.IntentRouter.run" class="md-nav__link">
    <span class="md-ellipsis">
      run
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#intentional-core.src.intentional_core.intent_routing.Stage" class="md-nav__link">
    <span class="md-ellipsis">
      Stage
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#intentional-core.src.intentional_core.llm_client" class="md-nav__link">
    <span class="md-ellipsis">
      llm_client
    </span>
  </a>
  
    <nav class="md-nav" aria-label="llm_client">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#intentional-core.src.intentional_core.llm_client.LLMClient" class="md-nav__link">
    <span class="md-ellipsis">
      LLMClient
    </span>
  </a>
  
    <nav class="md-nav" aria-label="LLMClient">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#intentional-core.src.intentional_core.llm_client.LLMClient.name" class="md-nav__link">
    <span class="md-ellipsis">
      name
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#intentional-core.src.intentional_core.llm_client.LLMClient.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#intentional-core.src.intentional_core.llm_client.LLMClient.connect" class="md-nav__link">
    <span class="md-ellipsis">
      connect
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#intentional-core.src.intentional_core.llm_client.LLMClient.disconnect" class="md-nav__link">
    <span class="md-ellipsis">
      disconnect
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#intentional-core.src.intentional_core.llm_client.LLMClient.handle_interruption" class="md-nav__link">
    <span class="md-ellipsis">
      handle_interruption
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#intentional-core.src.intentional_core.llm_client.LLMClient.run" class="md-nav__link">
    <span class="md-ellipsis">
      run
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#intentional-core.src.intentional_core.llm_client.LLMClient.send" class="md-nav__link">
    <span class="md-ellipsis">
      send
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#intentional-core.src.intentional_core.llm_client.load_llm_client_from_dict" class="md-nav__link">
    <span class="md-ellipsis">
      load_llm_client_from_dict
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#intentional-core.src.intentional_core.tools" class="md-nav__link">
    <span class="md-ellipsis">
      tools
    </span>
  </a>
  
    <nav class="md-nav" aria-label="tools">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#intentional-core.src.intentional_core.tools.Tool" class="md-nav__link">
    <span class="md-ellipsis">
      Tool
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Tool">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#intentional-core.src.intentional_core.tools.Tool.run" class="md-nav__link">
    <span class="md-ellipsis">
      run
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#intentional-core.src.intentional_core.tools.ToolParameter" class="md-nav__link">
    <span class="md-ellipsis">
      ToolParameter
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#intentional-core.src.intentional_core.tools.load_tools_from_dict" class="md-nav__link">
    <span class="md-ellipsis">
      load_tools_from_dict
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#intentional-core.src.intentional_core.utils" class="md-nav__link">
    <span class="md-ellipsis">
      utils
    </span>
  </a>
  
    <nav class="md-nav" aria-label="utils">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#intentional-core.src.intentional_core.utils.importing" class="md-nav__link">
    <span class="md-ellipsis">
      importing
    </span>
  </a>
  
    <nav class="md-nav" aria-label="importing">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#intentional-core.src.intentional_core.utils.importing.import_all_plugins" class="md-nav__link">
    <span class="md-ellipsis">
      import_all_plugins
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#intentional-core.src.intentional_core.utils.importing.import_plugin" class="md-nav__link">
    <span class="md-ellipsis">
      import_plugin
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#intentional-core.src.intentional_core.utils.inheritance" class="md-nav__link">
    <span class="md-ellipsis">
      inheritance
    </span>
  </a>
  
    <nav class="md-nav" aria-label="inheritance">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#intentional-core.src.intentional_core.utils.inheritance.inheritors" class="md-nav__link">
    <span class="md-ellipsis">
      inheritors
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="api-reference-core-package">API Reference - Core Package<a class="headerlink" href="#api-reference-core-package" title="Permanent link">#</a></h1>


<div class="doc doc-object doc-module">



<a id="intentional-core"></a>
    <div class="doc doc-contents first">








  <div class="doc doc-children">










<div class="doc doc-object doc-module">



<h2 id="intentional-core.src" class="doc doc-heading">
            <code>src</code>


<a href="#intentional-core.src" class="headerlink" title="Permanent link">#</a></h2>

    <div class="doc doc-contents ">








  <div class="doc doc-children">










<div class="doc doc-object doc-module">



<h3 id="intentional-core.src.intentional_core" class="doc doc-heading">
            <code>intentional_core</code>


<a href="#intentional-core.src.intentional_core" class="headerlink" title="Permanent link">#</a></h3>

    <div class="doc doc-contents ">

        <p>Init file for <code>intentional_core</code>.</p>








  <div class="doc doc-children">










<div class="doc doc-object doc-module">



<h4 id="intentional-core.src.intentional_core.__about__" class="doc doc-heading">
            <code>__about__</code>


<a href="#intentional-core.src.intentional_core.__about__" class="headerlink" title="Permanent link">#</a></h4>

    <div class="doc doc-contents ">

        <p>Package descriptors for intentional-core.</p>








  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h4 id="intentional-core.src.intentional_core.bot_interface" class="doc doc-heading">
            <code>bot_interface</code>


<a href="#intentional-core.src.intentional_core.bot_interface" class="headerlink" title="Permanent link">#</a></h4>

    <div class="doc doc-contents ">

        <p>Functions to load bots from config files.</p>








  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h5 id="intentional-core.src.intentional_core.bot_interface.BotInterface" class="doc doc-heading">
            <code>BotInterface</code>


<a href="#intentional-core.src.intentional_core.bot_interface.BotInterface" class="headerlink" title="Permanent link">#</a></h5>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="abc.ABC">ABC</span></code></p>


        <p>Tiny base class used to recognize Intentional bots interfaces.</p>
<p>The class name is meant to represent the <strong>communication channel</strong> you will use to interact with your bot.
For example an interface that uses a local command line interface would be called "TerminalBotInterface", one that
uses Whatsapp would be called "WhatsappBotInterface", one that uses Twilio would be called "TwilioBotInterface",
etc.</p>
<p>In order for your bot to be usable, you need to assign a value to the <code>name</code> class variable in the class definition.</p>






              <details class="quote">
                <summary>Source code in <code>intentional-core/src/intentional_core/bot_interface.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">BotInterface</span><span class="p">(</span><span class="n">ABC</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Tiny base class used to recognize Intentional bots interfaces.</span>

<span class="sd">    The class name is meant to represent the **communication channel** you will use to interact with your bot.</span>
<span class="sd">    For example an interface that uses a local command line interface would be called &quot;TerminalBotInterface&quot;, one that</span>
<span class="sd">    uses Whatsapp would be called &quot;WhatsappBotInterface&quot;, one that uses Twilio would be called &quot;TwilioBotInterface&quot;,</span>
<span class="sd">    etc.</span>

<span class="sd">    In order for your bot to be usable, you need to assign a value to the `name` class variable in the class definition.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The name of the bot interface. This should be a unique identifier for the bot interface.</span>
<span class="sd">    This string will be used in configuration files to identify the bot interface.</span>

<span class="sd">    The bot interface name should directly recall the class name as much as possible.</span>
<span class="sd">    For example, the name of &quot;LocalBotInterface&quot; should be &quot;local&quot;, the name of &quot;WhatsappBotInterface&quot; should be</span>
<span class="sd">    &quot;whatsapp&quot;, etc.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">async</span> <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Run the bot interface.</span>

<span class="sd">        This method should be overridden by the subclass to implement the bot&#39;s main loop.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;BotInterface subclasses must implement the run method.&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h6 id="intentional-core.src.intentional_core.bot_interface.BotInterface.name" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">name</span> <span class="o">=</span> <span class="kc">None</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#intentional-core.src.intentional_core.bot_interface.BotInterface.name" class="headerlink" title="Permanent link">#</a></h6>


    <div class="doc doc-contents ">

        <p>The name of the bot interface. This should be a unique identifier for the bot interface.
This string will be used in configuration files to identify the bot interface.</p>
<p>The bot interface name should directly recall the class name as much as possible.
For example, the name of "LocalBotInterface" should be "local", the name of "WhatsappBotInterface" should be
"whatsapp", etc.</p>
    </div>

</div>



<div class="doc doc-object doc-function">


<h6 id="intentional-core.src.intentional_core.bot_interface.BotInterface.run" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">run</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#intentional-core.src.intentional_core.bot_interface.BotInterface.run" class="headerlink" title="Permanent link">#</a></h6>


    <div class="doc doc-contents ">

        <p>Run the bot interface.</p>
<p>This method should be overridden by the subclass to implement the bot's main loop.</p>

            <details class="quote">
              <summary>Source code in <code>intentional-core/src/intentional_core/bot_interface.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@abstractmethod</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Run the bot interface.</span>

<span class="sd">    This method should be overridden by the subclass to implement the bot&#39;s main loop.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;BotInterface subclasses must implement the run method.&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>


<div class="doc doc-object doc-function">


<h5 id="intentional-core.src.intentional_core.bot_interface.load_bot_interface_from_dict" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">load_bot_interface_from_dict</span><span class="p">(</span><span class="n">config</span><span class="p">)</span></code>

<a href="#intentional-core.src.intentional_core.bot_interface.load_bot_interface_from_dict" class="headerlink" title="Permanent link">#</a></h5>


    <div class="doc doc-contents ">

        <p>Load a bot interface, and all its inner classes, from a dictionary configuration.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>config</code>
            </td>
            <td>
                  <code><span title="typing.Dict">Dict</span>[str, <span title="typing.Any">Any</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The configuration dictionary.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="intentional-core.src.intentional_core.bot_interface.BotInterface" href="#intentional-core.src.intentional_core.bot_interface.BotInterface">BotInterface</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The bot interface instance.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>intentional-core/src/intentional_core/bot_interface.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">load_bot_interface_from_dict</span><span class="p">(</span><span class="n">config</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">BotInterface</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Load a bot interface, and all its inner classes, from a dictionary configuration.</span>

<span class="sd">    Args:</span>
<span class="sd">        config: The configuration dictionary.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The bot interface instance.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
        <span class="s2">&quot;Loading bot interface from configuration:&quot;</span><span class="p">,</span>
        <span class="n">bot_interface_config</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="c1"># Import all the necessary plugins</span>
    <span class="n">plugins</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;plugins&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">plugins</span><span class="p">:</span>
        <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Found plugins to import&quot;</span><span class="p">,</span> <span class="n">plugins</span><span class="o">=</span><span class="n">plugins</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">plugin</span> <span class="ow">in</span> <span class="n">plugins</span><span class="p">:</span>
            <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Importing plugin&quot;</span><span class="p">,</span> <span class="n">plugin</span><span class="o">=</span><span class="n">plugin</span><span class="p">)</span>
            <span class="n">import_plugin</span><span class="p">(</span><span class="n">plugin</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">import_all_plugins</span><span class="p">()</span>

    <span class="c1"># Initialize the intent router</span>
    <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Creating intent router&quot;</span><span class="p">)</span>
    <span class="n">intent_router</span> <span class="o">=</span> <span class="n">IntentRouter</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;conversation&quot;</span><span class="p">,</span> <span class="p">{}))</span>

    <span class="c1"># Get all the subclasses of Bot</span>
    <span class="n">subclasses</span><span class="p">:</span> <span class="n">Set</span><span class="p">[</span><span class="n">BotInterface</span><span class="p">]</span> <span class="o">=</span> <span class="n">inheritors</span><span class="p">(</span><span class="n">BotInterface</span><span class="p">)</span>
    <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Collected bot interface classes&quot;</span><span class="p">,</span> <span class="n">bot_interfaces</span><span class="o">=</span><span class="n">subclasses</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">subclass</span> <span class="ow">in</span> <span class="n">subclasses</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">subclass</span><span class="o">.</span><span class="n">name</span><span class="p">:</span>
            <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
                <span class="s2">&quot;Bot interface class &#39;</span><span class="si">%s</span><span class="s2">&#39; does not have a name. This bot type will not be usable.&quot;</span><span class="p">,</span>
                <span class="n">subclass</span><span class="p">,</span>
                <span class="n">bot_interface_class</span><span class="o">=</span><span class="n">subclass</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="k">continue</span>

        <span class="k">if</span> <span class="n">subclass</span><span class="o">.</span><span class="n">name</span> <span class="ow">in</span> <span class="n">_BOT_INTERFACES</span><span class="p">:</span>
            <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                <span class="s2">&quot;Duplicate bot interface type &#39;</span><span class="si">%s</span><span class="s2">&#39; found. The older class will be replaced by the newly imported one.&quot;</span><span class="p">,</span>
                <span class="n">subclass</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                <span class="n">old_bot_interface_name</span><span class="o">=</span><span class="n">subclass</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                <span class="n">old_bot_interface_class</span><span class="o">=</span><span class="n">_BOT_INTERFACES</span><span class="p">[</span><span class="n">subclass</span><span class="o">.</span><span class="n">name</span><span class="p">],</span>
                <span class="n">new_bot_interface_class</span><span class="o">=</span><span class="n">subclass</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="n">_BOT_INTERFACES</span><span class="p">[</span><span class="n">subclass</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">subclass</span>

    <span class="c1"># Identify the type of bot interface and see if it&#39;s known</span>
    <span class="n">interface_class</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;interface&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">interface_class</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Bot configuration must contain an &#39;interface&#39; key to know which interface to use.&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">interface_class</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">_BOT_INTERFACES</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Unknown bot interface type &#39;</span><span class="si">{</span><span class="n">interface_class</span><span class="si">}</span><span class="s2">&#39;. Available types: </span><span class="si">{</span><span class="nb">list</span><span class="p">(</span><span class="n">_BOT_INTERFACES</span><span class="p">)</span><span class="si">}</span><span class="s2">. &quot;</span>
            <span class="s2">&quot;Did you forget to add the correct plugin name in the configuration file, or to install it?&quot;</span>
        <span class="p">)</span>

    <span class="c1"># Handoff to the subclass&#39; init</span>
    <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Creating bot interface&quot;</span><span class="p">,</span> <span class="n">bot_interface_class</span><span class="o">=</span><span class="n">interface_class</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">_BOT_INTERFACES</span><span class="p">[</span><span class="n">interface_class</span><span class="p">](</span><span class="n">intent_router</span><span class="o">=</span><span class="n">intent_router</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="intentional-core.src.intentional_core.bot_interface.load_configuration_file" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">load_configuration_file</span><span class="p">(</span><span class="n">path</span><span class="p">)</span></code>

<a href="#intentional-core.src.intentional_core.bot_interface.load_configuration_file" class="headerlink" title="Permanent link">#</a></h5>


    <div class="doc doc-contents ">

        <p>Load an Intentional bot from a YAML configuration file.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>path</code>
            </td>
            <td>
                  <code><span title="pathlib.Path">Path</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Path to the YAML configuration file.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="intentional-core.src.intentional_core.bot_interface.BotInterface" href="#intentional-core.src.intentional_core.bot_interface.BotInterface">BotInterface</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The bot instance.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>intentional-core/src/intentional_core/bot_interface.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">load_configuration_file</span><span class="p">(</span><span class="n">path</span><span class="p">:</span> <span class="n">Path</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">BotInterface</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Load an Intentional bot from a YAML configuration file.</span>

<span class="sd">    Args:</span>
<span class="sd">        path: Path to the YAML configuration file.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The bot instance.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Loading YAML configuration file&quot;</span><span class="p">,</span> <span class="n">config_file_path</span><span class="o">=</span><span class="n">path</span><span class="p">)</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
        <span class="n">config</span> <span class="o">=</span> <span class="n">yaml</span><span class="o">.</span><span class="n">safe_load</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">load_bot_interface_from_dict</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h4 id="intentional-core.src.intentional_core.bot_structures" class="doc doc-heading">
            <code>bot_structures</code>


<a href="#intentional-core.src.intentional_core.bot_structures" class="headerlink" title="Permanent link">#</a></h4>

    <div class="doc doc-contents ">

        <p>Bot structures supported by Intentional.</p>








  <div class="doc doc-children">










<div class="doc doc-object doc-module">



<h5 id="intentional-core.src.intentional_core.bot_structures.bot_structure" class="doc doc-heading">
            <code>bot_structure</code>


<a href="#intentional-core.src.intentional_core.bot_structures.bot_structure" class="headerlink" title="Permanent link">#</a></h5>

    <div class="doc doc-contents ">

        <p>Functions to load bot structure classes from config files.</p>








  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h6 id="intentional-core.src.intentional_core.bot_structures.bot_structure.BotStructure" class="doc doc-heading">
            <code>BotStructure</code>


<a href="#intentional-core.src.intentional_core.bot_structures.bot_structure.BotStructure" class="headerlink" title="Permanent link">#</a></h6>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="intentional_core.events.EventListener">EventListener</span></code></p>


        <p>Tiny base class used to recognize Intentional bot structure classes.</p>
<p>The bot structure's name is meant to represent the <strong>structure</strong> of the bot. For example a bot that uses a direct
WebSocket connection to a LLM such as OpenAI's Realtime API could be called "RealtimeAPIBotStructure", one that
uses a VAD-STT-LLM-TTS stack could be called "AudioToTextBotStructure", and so on</p>
<p>In order for your bot structure to be usable, you need to assign a value to the <code>name</code> class variable in the bot
structure class' definition.</p>






              <details class="quote">
                <summary>Source code in <code>intentional-core/src/intentional_core/bot_structures/bot_structure.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">BotStructure</span><span class="p">(</span><span class="n">EventListener</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Tiny base class used to recognize Intentional bot structure classes.</span>

<span class="sd">    The bot structure&#39;s name is meant to represent the **structure** of the bot. For example a bot that uses a direct</span>
<span class="sd">    WebSocket connection to a LLM such as OpenAI&#39;s Realtime API could be called &quot;RealtimeAPIBotStructure&quot;, one that</span>
<span class="sd">    uses a VAD-STT-LLM-TTS stack could be called &quot;AudioToTextBotStructure&quot;, and so on</span>

<span class="sd">    In order for your bot structure to be usable, you need to assign a value to the `name` class variable in the bot</span>
<span class="sd">    structure class&#39; definition.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The name of this bot&#39;s structure. This should be a unique identifier for the bot structure type.</span>

<span class="sd">    The bot structure&#39;s name should directly recall the class name as much as possible. For example, the name of</span>
<span class="sd">    &quot;WebsocketBotStructure&quot; should be &quot;websocket&quot;, the name of &quot;AudioToTextBotStructure&quot; should be &quot;audio_to_text&quot;,</span>
<span class="sd">    etc.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">connect</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Connect to the bot.</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">disconnect</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Disconnect from the bot.</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">async</span> <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Main loop for the bot.</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">async</span> <span class="k">def</span> <span class="nf">send</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Send a message to the bot.</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">async</span> <span class="k">def</span> <span class="nf">handle_interruption</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lenght_to_interruption</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Handle an interruption in the streaming.</span>

<span class="sd">        Args:</span>
<span class="sd">            lenght_to_interruption: The length of the data that was produced to the user before the interruption.</span>
<span class="sd">                This value could be number of characters, number of words, milliseconds, number of audio frames, etc.</span>
<span class="sd">                depending on the bot structure that implements it.</span>
<span class="sd">        &quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h7 id="intentional-core.src.intentional_core.bot_structures.bot_structure.BotStructure.name" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">name</span> <span class="o">=</span> <span class="kc">None</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#intentional-core.src.intentional_core.bot_structures.bot_structure.BotStructure.name" class="headerlink" title="Permanent link">#</a></h7>


    <div class="doc doc-contents ">

        <p>The name of this bot's structure. This should be a unique identifier for the bot structure type.</p>
<p>The bot structure's name should directly recall the class name as much as possible. For example, the name of
"WebsocketBotStructure" should be "websocket", the name of "AudioToTextBotStructure" should be "audio_to_text",
etc.</p>
    </div>

</div>



<div class="doc doc-object doc-function">


<h7 id="intentional-core.src.intentional_core.bot_structures.bot_structure.BotStructure.connect" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">connect</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#intentional-core.src.intentional_core.bot_structures.bot_structure.BotStructure.connect" class="headerlink" title="Permanent link">#</a></h7>


    <div class="doc doc-contents ">

        <p>Connect to the bot.</p>

            <details class="quote">
              <summary>Source code in <code>intentional-core/src/intentional_core/bot_structures/bot_structure.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">connect</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Connect to the bot.</span>
<span class="sd">    &quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h7 id="intentional-core.src.intentional_core.bot_structures.bot_structure.BotStructure.disconnect" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">disconnect</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#intentional-core.src.intentional_core.bot_structures.bot_structure.BotStructure.disconnect" class="headerlink" title="Permanent link">#</a></h7>


    <div class="doc doc-contents ">

        <p>Disconnect from the bot.</p>

            <details class="quote">
              <summary>Source code in <code>intentional-core/src/intentional_core/bot_structures/bot_structure.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">disconnect</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Disconnect from the bot.</span>
<span class="sd">    &quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h7 id="intentional-core.src.intentional_core.bot_structures.bot_structure.BotStructure.handle_interruption" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">handle_interruption</span><span class="p">(</span><span class="n">lenght_to_interruption</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#intentional-core.src.intentional_core.bot_structures.bot_structure.BotStructure.handle_interruption" class="headerlink" title="Permanent link">#</a></h7>


    <div class="doc doc-contents ">

        <p>Handle an interruption in the streaming.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>lenght_to_interruption</code>
            </td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The length of the data that was produced to the user before the interruption.
This value could be number of characters, number of words, milliseconds, number of audio frames, etc.
depending on the bot structure that implements it.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>intentional-core/src/intentional_core/bot_structures/bot_structure.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@abstractmethod</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">handle_interruption</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lenght_to_interruption</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handle an interruption in the streaming.</span>

<span class="sd">    Args:</span>
<span class="sd">        lenght_to_interruption: The length of the data that was produced to the user before the interruption.</span>
<span class="sd">            This value could be number of characters, number of words, milliseconds, number of audio frames, etc.</span>
<span class="sd">            depending on the bot structure that implements it.</span>
<span class="sd">    &quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h7 id="intentional-core.src.intentional_core.bot_structures.bot_structure.BotStructure.run" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">run</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#intentional-core.src.intentional_core.bot_structures.bot_structure.BotStructure.run" class="headerlink" title="Permanent link">#</a></h7>


    <div class="doc doc-contents ">

        <p>Main loop for the bot.</p>

            <details class="quote">
              <summary>Source code in <code>intentional-core/src/intentional_core/bot_structures/bot_structure.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@abstractmethod</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Main loop for the bot.</span>
<span class="sd">    &quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h7 id="intentional-core.src.intentional_core.bot_structures.bot_structure.BotStructure.send" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">send</span><span class="p">(</span><span class="n">data</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#intentional-core.src.intentional_core.bot_structures.bot_structure.BotStructure.send" class="headerlink" title="Permanent link">#</a></h7>


    <div class="doc doc-contents ">

        <p>Send a message to the bot.</p>

            <details class="quote">
              <summary>Source code in <code>intentional-core/src/intentional_core/bot_structures/bot_structure.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@abstractmethod</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">send</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Send a message to the bot.</span>
<span class="sd">    &quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>


<div class="doc doc-object doc-function">


<h6 id="intentional-core.src.intentional_core.bot_structures.bot_structure.load_bot_structure_from_dict" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">load_bot_structure_from_dict</span><span class="p">(</span><span class="n">intent_router</span><span class="p">,</span> <span class="n">config</span><span class="p">)</span></code>

<a href="#intentional-core.src.intentional_core.bot_structures.bot_structure.load_bot_structure_from_dict" class="headerlink" title="Permanent link">#</a></h6>


    <div class="doc doc-contents ">

        <p>Load a bot structure from a dictionary configuration.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>config</code>
            </td>
            <td>
                  <code><span title="typing.Dict">Dict</span>[str, <span title="typing.Any">Any</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The configuration dictionary.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="intentional-core.src.intentional_core.bot_structures.bot_structure.BotStructure" href="#intentional-core.src.intentional_core.bot_structures.bot_structure.BotStructure">BotStructure</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The BotStructure instance.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>intentional-core/src/intentional_core/bot_structures/bot_structure.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">load_bot_structure_from_dict</span><span class="p">(</span><span class="n">intent_router</span><span class="p">:</span> <span class="n">IntentRouter</span><span class="p">,</span> <span class="n">config</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">BotStructure</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Load a bot structure from a dictionary configuration.</span>

<span class="sd">    Args:</span>
<span class="sd">        config: The configuration dictionary.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The BotStructure instance.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Get all the subclasses of Bot</span>
    <span class="n">subclasses</span><span class="p">:</span> <span class="n">Set</span><span class="p">[</span><span class="n">BotStructure</span><span class="p">]</span> <span class="o">=</span> <span class="n">inheritors</span><span class="p">(</span><span class="n">BotStructure</span><span class="p">)</span>
    <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Collected bot structure classes&quot;</span><span class="p">,</span> <span class="n">bot_structure_classes</span><span class="o">=</span><span class="n">subclasses</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">subclass</span> <span class="ow">in</span> <span class="n">subclasses</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">subclass</span><span class="o">.</span><span class="n">name</span><span class="p">:</span>
            <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
                <span class="s2">&quot;BotStructure class &#39;</span><span class="si">%s</span><span class="s2">&#39; does not have a name. This bot structure type will not be usable.&quot;</span><span class="p">,</span>
                <span class="n">subclass</span><span class="p">,</span>
                <span class="n">bot_structure_class</span><span class="o">=</span><span class="n">subclass</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="k">continue</span>

        <span class="k">if</span> <span class="n">subclass</span><span class="o">.</span><span class="n">name</span> <span class="ow">in</span> <span class="n">_BOT_STRUCTURES</span><span class="p">:</span>
            <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                <span class="s2">&quot;Duplicate bot structure type &#39;</span><span class="si">%s</span><span class="s2">&#39; found. The older class will be replaced by the newly imported one.&quot;</span><span class="p">,</span>
                <span class="n">subclass</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                <span class="n">old_bot_structure_name</span><span class="o">=</span><span class="n">subclass</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                <span class="n">old_bot_structure_class</span><span class="o">=</span><span class="n">_BOT_STRUCTURES</span><span class="p">[</span><span class="n">subclass</span><span class="o">.</span><span class="n">name</span><span class="p">],</span>
                <span class="n">new_bot_structure_class</span><span class="o">=</span><span class="n">subclass</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="n">_BOT_STRUCTURES</span><span class="p">[</span><span class="n">subclass</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">subclass</span>

    <span class="c1"># Identify the type of bot and see if it&#39;s known</span>
    <span class="n">bot_structure_class</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;type&quot;</span><span class="p">)</span>
    <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Creating bot structure&quot;</span><span class="p">,</span> <span class="n">bot_structure_class</span><span class="o">=</span><span class="n">bot_structure_class</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">bot_structure_class</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">_BOT_STRUCTURES</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Unknown bot structure type &#39;</span><span class="si">{</span><span class="n">bot_structure_class</span><span class="si">}</span><span class="s2">&#39;. Available types: </span><span class="si">{</span><span class="nb">list</span><span class="p">(</span><span class="n">_BOT_STRUCTURES</span><span class="p">)</span><span class="si">}</span><span class="s2">. &quot;</span>
            <span class="s2">&quot;Did you forget to install your plugin?&quot;</span>
        <span class="p">)</span>

    <span class="c1"># Handoff to the subclass&#39; init</span>
    <span class="k">return</span> <span class="n">_BOT_STRUCTURES</span><span class="p">[</span><span class="n">bot_structure_class</span><span class="p">](</span><span class="n">config</span><span class="p">,</span> <span class="n">intent_router</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h5 id="intentional-core.src.intentional_core.bot_structures.direct_to_llm" class="doc doc-heading">
            <code>direct_to_llm</code>


<a href="#intentional-core.src.intentional_core.bot_structures.direct_to_llm" class="headerlink" title="Permanent link">#</a></h5>

    <div class="doc doc-contents ">

        <p>Bot structure to support text chat for Intentional.</p>








  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h6 id="intentional-core.src.intentional_core.bot_structures.direct_to_llm.DirectToLLMBotStructure" class="doc doc-heading">
            <code>DirectToLLMBotStructure</code>


<a href="#intentional-core.src.intentional_core.bot_structures.direct_to_llm.DirectToLLMBotStructure" class="headerlink" title="Permanent link">#</a></h6>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="intentional_core.bot_structures.bot_structure.BotStructure">BotStructure</span></code></p>


        <p>Bot structure implementation for text chat.</p>






              <details class="quote">
                <summary>Source code in <code>intentional-core/src/intentional_core/bot_structures/direct_to_llm.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">DirectToLLMBotStructure</span><span class="p">(</span><span class="n">BotStructure</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Bot structure implementation for text chat.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;direct_to_llm&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="n">intent_router</span><span class="p">:</span> <span class="n">IntentRouter</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Args:</span>
<span class="sd">            config:</span>
<span class="sd">                The configuration dictionary for the bot structure.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Loading bot structure from config&quot;</span><span class="p">,</span> <span class="n">bot_structure_config</span><span class="o">=</span><span class="n">config</span><span class="p">)</span>

        <span class="c1"># Init the model client</span>
        <span class="n">llm_config</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;llm&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">llm_config</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2"> requires a &#39;llm&#39; configuration key.&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">llm</span><span class="p">:</span> <span class="n">LLMClient</span> <span class="o">=</span> <span class="n">load_llm_client_from_dict</span><span class="p">(</span><span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">intent_router</span><span class="o">=</span><span class="n">intent_router</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="n">llm_config</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">connect</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initializes the model and connects to it as/if necessary.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">llm</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">disconnect</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Disconnects from the model and unloads/closes it as/if necessary.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">llm</span><span class="o">.</span><span class="n">disconnect</span><span class="p">()</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Main loop for the bot.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">llm</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">send</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">AsyncGenerator</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sends a message to the model and forward the response.</span>

<span class="sd">        Args:</span>
<span class="sd">            data: The message to send to the model in OpenAI format, like {&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;Hello!&quot;}</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">llm</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">handle_interruption</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lenght_to_interruption</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Handle an interruption in the streaming.</span>

<span class="sd">        Args:</span>
<span class="sd">            lenght_to_interruption: The length of the data that was produced to the user before the interruption.</span>
<span class="sd">                This value could be number of characters, number of words, milliseconds, number of audio frames, etc.</span>
<span class="sd">                depending on the bot structure that implements it.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">llm</span><span class="o">.</span><span class="n">handle_interruption</span><span class="p">(</span><span class="n">lenght_to_interruption</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h7 id="intentional-core.src.intentional_core.bot_structures.direct_to_llm.DirectToLLMBotStructure.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">intent_router</span><span class="p">)</span></code>

<a href="#intentional-core.src.intentional_core.bot_structures.direct_to_llm.DirectToLLMBotStructure.__init__" class="headerlink" title="Permanent link">#</a></h7>


    <div class="doc doc-contents ">



<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>config</code>
            </td>
            <td>
                  <code><span title="typing.Dict">Dict</span>[str, <span title="typing.Any">Any</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The configuration dictionary for the bot structure.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>intentional-core/src/intentional_core/bot_structures/direct_to_llm.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="n">intent_router</span><span class="p">:</span> <span class="n">IntentRouter</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Args:</span>
<span class="sd">        config:</span>
<span class="sd">            The configuration dictionary for the bot structure.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
    <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Loading bot structure from config&quot;</span><span class="p">,</span> <span class="n">bot_structure_config</span><span class="o">=</span><span class="n">config</span><span class="p">)</span>

    <span class="c1"># Init the model client</span>
    <span class="n">llm_config</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;llm&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">llm_config</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2"> requires a &#39;llm&#39; configuration key.&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">llm</span><span class="p">:</span> <span class="n">LLMClient</span> <span class="o">=</span> <span class="n">load_llm_client_from_dict</span><span class="p">(</span><span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">intent_router</span><span class="o">=</span><span class="n">intent_router</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="n">llm_config</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h7 id="intentional-core.src.intentional_core.bot_structures.direct_to_llm.DirectToLLMBotStructure.connect" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">connect</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#intentional-core.src.intentional_core.bot_structures.direct_to_llm.DirectToLLMBotStructure.connect" class="headerlink" title="Permanent link">#</a></h7>


    <div class="doc doc-contents ">

        <p>Initializes the model and connects to it as/if necessary.</p>

            <details class="quote">
              <summary>Source code in <code>intentional-core/src/intentional_core/bot_structures/direct_to_llm.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">connect</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initializes the model and connects to it as/if necessary.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">llm</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h7 id="intentional-core.src.intentional_core.bot_structures.direct_to_llm.DirectToLLMBotStructure.disconnect" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">disconnect</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#intentional-core.src.intentional_core.bot_structures.direct_to_llm.DirectToLLMBotStructure.disconnect" class="headerlink" title="Permanent link">#</a></h7>


    <div class="doc doc-contents ">

        <p>Disconnects from the model and unloads/closes it as/if necessary.</p>

            <details class="quote">
              <summary>Source code in <code>intentional-core/src/intentional_core/bot_structures/direct_to_llm.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">disconnect</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Disconnects from the model and unloads/closes it as/if necessary.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">llm</span><span class="o">.</span><span class="n">disconnect</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h7 id="intentional-core.src.intentional_core.bot_structures.direct_to_llm.DirectToLLMBotStructure.handle_interruption" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">handle_interruption</span><span class="p">(</span><span class="n">lenght_to_interruption</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#intentional-core.src.intentional_core.bot_structures.direct_to_llm.DirectToLLMBotStructure.handle_interruption" class="headerlink" title="Permanent link">#</a></h7>


    <div class="doc doc-contents ">

        <p>Handle an interruption in the streaming.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>lenght_to_interruption</code>
            </td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The length of the data that was produced to the user before the interruption.
This value could be number of characters, number of words, milliseconds, number of audio frames, etc.
depending on the bot structure that implements it.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>intentional-core/src/intentional_core/bot_structures/direct_to_llm.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">handle_interruption</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lenght_to_interruption</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handle an interruption in the streaming.</span>

<span class="sd">    Args:</span>
<span class="sd">        lenght_to_interruption: The length of the data that was produced to the user before the interruption.</span>
<span class="sd">            This value could be number of characters, number of words, milliseconds, number of audio frames, etc.</span>
<span class="sd">            depending on the bot structure that implements it.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">llm</span><span class="o">.</span><span class="n">handle_interruption</span><span class="p">(</span><span class="n">lenght_to_interruption</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h7 id="intentional-core.src.intentional_core.bot_structures.direct_to_llm.DirectToLLMBotStructure.run" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">run</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#intentional-core.src.intentional_core.bot_structures.direct_to_llm.DirectToLLMBotStructure.run" class="headerlink" title="Permanent link">#</a></h7>


    <div class="doc doc-contents ">

        <p>Main loop for the bot.</p>

            <details class="quote">
              <summary>Source code in <code>intentional-core/src/intentional_core/bot_structures/direct_to_llm.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Main loop for the bot.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">llm</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h7 id="intentional-core.src.intentional_core.bot_structures.direct_to_llm.DirectToLLMBotStructure.send" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">send</span><span class="p">(</span><span class="n">data</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#intentional-core.src.intentional_core.bot_structures.direct_to_llm.DirectToLLMBotStructure.send" class="headerlink" title="Permanent link">#</a></h7>


    <div class="doc doc-contents ">

        <p>Sends a message to the model and forward the response.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>data</code>
            </td>
            <td>
                  <code><span title="typing.Dict">Dict</span>[str, <span title="typing.Any">Any</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The message to send to the model in OpenAI format, like {"role": "user", "content": "Hello!"}</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>intentional-core/src/intentional_core/bot_structures/direct_to_llm.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">send</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">AsyncGenerator</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Sends a message to the model and forward the response.</span>

<span class="sd">    Args:</span>
<span class="sd">        data: The message to send to the model in OpenAI format, like {&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;Hello!&quot;}</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">llm</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>


  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h4 id="intentional-core.src.intentional_core.end_conversation" class="doc doc-heading">
            <code>end_conversation</code>


<a href="#intentional-core.src.intentional_core.end_conversation" class="headerlink" title="Permanent link">#</a></h4>

    <div class="doc doc-contents ">

        <p>Tool that ends and resets the conversation.
Once a conversation reaches this stage, the bot should restart from the <em>start</em> stage. See IntentRouter.</p>








  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h5 id="intentional-core.src.intentional_core.end_conversation.EndConversationTool" class="doc doc-heading">
            <code>EndConversationTool</code>


<a href="#intentional-core.src.intentional_core.end_conversation.EndConversationTool" class="headerlink" title="Permanent link">#</a></h5>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="intentional_core.tools.Tool">Tool</span></code></p>


        <p>Tool to end the conversation. Resets the intent router to its initial stage.</p>






              <details class="quote">
                <summary>Source code in <code>intentional-core/src/intentional_core/end_conversation.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">EndConversationTool</span><span class="p">(</span><span class="n">Tool</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Tool to end the conversation. Resets the intent router to its initial stage.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nb">id</span> <span class="o">=</span> <span class="s2">&quot;end_conversation&quot;</span>
    <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;end_conversation&quot;</span>
    <span class="n">description</span> <span class="o">=</span> <span class="s2">&quot;End the conversation.&quot;</span>
    <span class="n">parameters</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">intent_router</span><span class="p">:</span> <span class="s2">&quot;IntentRouter&quot;</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">router</span> <span class="o">=</span> <span class="n">intent_router</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Ends the conversation and resets the intent router to its initial stage.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;The conversation has ended.&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">router</span><span class="o">.</span><span class="n">current_stage_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">router</span><span class="o">.</span><span class="n">initial_stage</span>
        <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
            <span class="s2">&quot;Intent router reset to initial stage.&quot;</span><span class="p">,</span>
            <span class="n">initial_stage</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">router</span><span class="o">.</span><span class="n">initial_stage</span><span class="p">,</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h6 id="intentional-core.src.intentional_core.end_conversation.EndConversationTool.run" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">run</span><span class="p">(</span><span class="n">params</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#intentional-core.src.intentional_core.end_conversation.EndConversationTool.run" class="headerlink" title="Permanent link">#</a></h6>


    <div class="doc doc-contents ">

        <p>Ends the conversation and resets the intent router to its initial stage.</p>

            <details class="quote">
              <summary>Source code in <code>intentional-core/src/intentional_core/end_conversation.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Ends the conversation and resets the intent router to its initial stage.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;The conversation has ended.&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">router</span><span class="o">.</span><span class="n">current_stage_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">router</span><span class="o">.</span><span class="n">initial_stage</span>
    <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
        <span class="s2">&quot;Intent router reset to initial stage.&quot;</span><span class="p">,</span>
        <span class="n">initial_stage</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">router</span><span class="o">.</span><span class="n">initial_stage</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h4 id="intentional-core.src.intentional_core.events" class="doc doc-heading">
            <code>events</code>


<a href="#intentional-core.src.intentional_core.events" class="headerlink" title="Permanent link">#</a></h4>

    <div class="doc doc-contents ">

        <p>Base class for very simplified event emitter and listener.</p>








  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h5 id="intentional-core.src.intentional_core.events.EventEmitter" class="doc doc-heading">
            <code>EventEmitter</code>


<a href="#intentional-core.src.intentional_core.events.EventEmitter" class="headerlink" title="Permanent link">#</a></h5>


    <div class="doc doc-contents ">


        <p>Sends any event to the listener.
TODO see if there's any scenario where we need more as this pattern is easy to extend but can get messy.</p>






              <details class="quote">
                <summary>Source code in <code>intentional-core/src/intentional_core/events.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">EventEmitter</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Sends any event to the listener.</span>
<span class="sd">    TODO see if there&#39;s any scenario where we need more as this pattern is easy to extend but can get messy.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">listener</span><span class="p">:</span> <span class="n">EventListener</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Register the listener.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_events_listener</span> <span class="o">=</span> <span class="n">listener</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">emit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Send the event to the listener.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Emitting event&quot;</span><span class="p">,</span> <span class="n">event_name</span><span class="o">=</span><span class="n">event_name</span><span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_events_listener</span><span class="o">.</span><span class="n">handle_event</span><span class="p">(</span><span class="n">event_name</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h6 id="intentional-core.src.intentional_core.events.EventEmitter.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">listener</span><span class="p">)</span></code>

<a href="#intentional-core.src.intentional_core.events.EventEmitter.__init__" class="headerlink" title="Permanent link">#</a></h6>


    <div class="doc doc-contents ">

        <p>Register the listener.</p>

            <details class="quote">
              <summary>Source code in <code>intentional-core/src/intentional_core/events.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">listener</span><span class="p">:</span> <span class="n">EventListener</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Register the listener.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_events_listener</span> <span class="o">=</span> <span class="n">listener</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="intentional-core.src.intentional_core.events.EventEmitter.emit" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">emit</span><span class="p">(</span><span class="n">event_name</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#intentional-core.src.intentional_core.events.EventEmitter.emit" class="headerlink" title="Permanent link">#</a></h6>


    <div class="doc doc-contents ">

        <p>Send the event to the listener.</p>

            <details class="quote">
              <summary>Source code in <code>intentional-core/src/intentional_core/events.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">emit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Send the event to the listener.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Emitting event&quot;</span><span class="p">,</span> <span class="n">event_name</span><span class="o">=</span><span class="n">event_name</span><span class="p">)</span>
    <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_events_listener</span><span class="o">.</span><span class="n">handle_event</span><span class="p">(</span><span class="n">event_name</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h5 id="intentional-core.src.intentional_core.events.EventListener" class="doc doc-heading">
            <code>EventListener</code>


<a href="#intentional-core.src.intentional_core.events.EventListener" class="headerlink" title="Permanent link">#</a></h5>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="abc.ABC">ABC</span></code></p>


        <p>Listens to events and handles them.</p>






              <details class="quote">
                <summary>Source code in <code>intentional-core/src/intentional_core/events.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">EventListener</span><span class="p">(</span><span class="n">ABC</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Listens to events and handles them.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize the bot structure.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">event_handlers</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Callable</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">def</span> <span class="nf">add_event_handler</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">handler</span><span class="p">:</span> <span class="n">Callable</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add an event handler for a specific event type.</span>

<span class="sd">        Args:</span>
<span class="sd">            event_name: The name of the event to handle.</span>
<span class="sd">            handler: The handler function to call when the event is received.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">event_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">event_handlers</span><span class="p">:</span>
            <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="s2">&quot;Event handler for &#39;</span><span class="si">%s</span><span class="s2">&#39; was already assigned. The older handler will be replaced by the new one.&quot;</span><span class="p">,</span>
                <span class="n">event_name</span><span class="p">,</span>
                <span class="n">event_name</span><span class="o">=</span><span class="n">event_name</span><span class="p">,</span>
                <span class="n">event_handler</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">event_handlers</span><span class="p">[</span><span class="n">event_name</span><span class="p">],</span>
            <span class="p">)</span>
        <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Adding event handler&quot;</span><span class="p">,</span> <span class="n">event_name</span><span class="o">=</span><span class="n">event_name</span><span class="p">,</span> <span class="n">event_handler</span><span class="o">=</span><span class="n">handler</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">event_handlers</span><span class="p">[</span><span class="n">event_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">handler</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">handle_event</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Handle different types of events that the LLM may generate.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="s2">&quot;*&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">event_handlers</span><span class="p">:</span>
            <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Calling wildcard event handler&quot;</span><span class="p">,</span> <span class="n">event_name</span><span class="o">=</span><span class="n">event_name</span><span class="p">)</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">event_handlers</span><span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">](</span><span class="n">event</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">event_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">event_handlers</span><span class="p">:</span>
            <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Calling event handler&quot;</span><span class="p">,</span> <span class="n">event_name</span><span class="o">=</span><span class="n">event_name</span><span class="p">)</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">event_handlers</span><span class="p">[</span><span class="n">event_name</span><span class="p">](</span><span class="n">event</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;No event handler for event&quot;</span><span class="p">,</span> <span class="n">event_name</span><span class="o">=</span><span class="n">event_name</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h6 id="intentional-core.src.intentional_core.events.EventListener.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">()</span></code>

<a href="#intentional-core.src.intentional_core.events.EventListener.__init__" class="headerlink" title="Permanent link">#</a></h6>


    <div class="doc doc-contents ">

        <p>Initialize the bot structure.</p>

            <details class="quote">
              <summary>Source code in <code>intentional-core/src/intentional_core/events.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initialize the bot structure.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">event_handlers</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Callable</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="intentional-core.src.intentional_core.events.EventListener.add_event_handler" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">add_event_handler</span><span class="p">(</span><span class="n">event_name</span><span class="p">,</span> <span class="n">handler</span><span class="p">)</span></code>

<a href="#intentional-core.src.intentional_core.events.EventListener.add_event_handler" class="headerlink" title="Permanent link">#</a></h6>


    <div class="doc doc-contents ">

        <p>Add an event handler for a specific event type.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>event_name</code>
            </td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The name of the event to handle.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>handler</code>
            </td>
            <td>
                  <code><span title="typing.Callable">Callable</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The handler function to call when the event is received.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>intentional-core/src/intentional_core/events.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">add_event_handler</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">handler</span><span class="p">:</span> <span class="n">Callable</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Add an event handler for a specific event type.</span>

<span class="sd">    Args:</span>
<span class="sd">        event_name: The name of the event to handle.</span>
<span class="sd">        handler: The handler function to call when the event is received.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">event_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">event_handlers</span><span class="p">:</span>
        <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
            <span class="s2">&quot;Event handler for &#39;</span><span class="si">%s</span><span class="s2">&#39; was already assigned. The older handler will be replaced by the new one.&quot;</span><span class="p">,</span>
            <span class="n">event_name</span><span class="p">,</span>
            <span class="n">event_name</span><span class="o">=</span><span class="n">event_name</span><span class="p">,</span>
            <span class="n">event_handler</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">event_handlers</span><span class="p">[</span><span class="n">event_name</span><span class="p">],</span>
        <span class="p">)</span>
    <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Adding event handler&quot;</span><span class="p">,</span> <span class="n">event_name</span><span class="o">=</span><span class="n">event_name</span><span class="p">,</span> <span class="n">event_handler</span><span class="o">=</span><span class="n">handler</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">event_handlers</span><span class="p">[</span><span class="n">event_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">handler</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="intentional-core.src.intentional_core.events.EventListener.handle_event" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">handle_event</span><span class="p">(</span><span class="n">event_name</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#intentional-core.src.intentional_core.events.EventListener.handle_event" class="headerlink" title="Permanent link">#</a></h6>


    <div class="doc doc-contents ">

        <p>Handle different types of events that the LLM may generate.</p>

            <details class="quote">
              <summary>Source code in <code>intentional-core/src/intentional_core/events.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">handle_event</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handle different types of events that the LLM may generate.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="s2">&quot;*&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">event_handlers</span><span class="p">:</span>
        <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Calling wildcard event handler&quot;</span><span class="p">,</span> <span class="n">event_name</span><span class="o">=</span><span class="n">event_name</span><span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">event_handlers</span><span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">](</span><span class="n">event</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">event_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">event_handlers</span><span class="p">:</span>
        <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Calling event handler&quot;</span><span class="p">,</span> <span class="n">event_name</span><span class="o">=</span><span class="n">event_name</span><span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">event_handlers</span><span class="p">[</span><span class="n">event_name</span><span class="p">](</span><span class="n">event</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;No event handler for event&quot;</span><span class="p">,</span> <span class="n">event_name</span><span class="o">=</span><span class="n">event_name</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h4 id="intentional-core.src.intentional_core.intent_routing" class="doc doc-heading">
            <code>intent_routing</code>


<a href="#intentional-core.src.intentional_core.intent_routing" class="headerlink" title="Permanent link">#</a></h4>

    <div class="doc doc-contents ">

        <p>Intent routing logic.</p>








  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h5 id="intentional-core.src.intentional_core.intent_routing.IntentRouter" class="doc doc-heading">
            <code>IntentRouter</code>


<a href="#intentional-core.src.intentional_core.intent_routing.IntentRouter" class="headerlink" title="Permanent link">#</a></h5>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="intentional_core.tools.Tool">Tool</span></code></p>


        <p>Special tool used to alter the system prompt depending on the user's response.</p>






              <details class="quote">
                <summary>Source code in <code>intentional-core/src/intentional_core/intent_routing.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">IntentRouter</span><span class="p">(</span><span class="n">Tool</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Special tool used to alter the system prompt depending on the user&#39;s response.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nb">id</span> <span class="o">=</span> <span class="s2">&quot;classify_response&quot;</span>
    <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;classify_response&quot;</span>
    <span class="n">description</span> <span class="o">=</span> <span class="s2">&quot;Classify the user&#39;s response for later use.&quot;</span>
    <span class="n">parameters</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">ToolParameter</span><span class="p">(</span>
            <span class="s2">&quot;outcome&quot;</span><span class="p">,</span>
            <span class="s2">&quot;The outcome the conversation reached, among the ones described in the prompt.&quot;</span><span class="p">,</span>
            <span class="s2">&quot;string&quot;</span><span class="p">,</span>
            <span class="kc">True</span><span class="p">,</span>
            <span class="kc">None</span><span class="p">,</span>
        <span class="p">),</span>
    <span class="p">]</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">background</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;background&quot;</span><span class="p">,</span> <span class="s2">&quot;You&#39;re a helpful assistant.&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">initial_message</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;initial_message&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">graph</span> <span class="o">=</span> <span class="n">networkx</span><span class="o">.</span><span class="n">MultiDiGraph</span><span class="p">()</span>

        <span class="c1"># Init the stages</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stages</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">if</span> <span class="s2">&quot;stages&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">config</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">config</span><span class="p">[</span><span class="s2">&quot;stages&quot;</span><span class="p">]:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The conversation must have at least one stage.&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">stage_config</span> <span class="ow">in</span> <span class="n">config</span><span class="p">[</span><span class="s2">&quot;stages&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Adding stage&quot;</span><span class="p">,</span> <span class="n">stage_name</span><span class="o">=</span><span class="n">name</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">stages</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">Stage</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">stage_config</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">stages</span><span class="p">[</span><span class="n">name</span><span class="p">]</span><span class="o">.</span><span class="n">tools</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span>  <span class="c1"># Add the intent router to the tools list of each stage</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>

        <span class="c1"># Add end stage</span>
        <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;_end_&quot;</span>
        <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Adding stage&quot;</span><span class="p">,</span> <span class="n">stage_name</span><span class="o">=</span><span class="n">name</span><span class="p">)</span>
        <span class="n">end_tool</span> <span class="o">=</span> <span class="n">EndConversationTool</span><span class="p">(</span><span class="n">intent_router</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stages</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">Stage</span><span class="p">(</span>
            <span class="n">name</span><span class="p">,</span>
            <span class="p">{</span><span class="s2">&quot;custom_template&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;The conversation is over. Call the &#39;</span><span class="si">{</span><span class="n">end_tool</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39; tool.&quot;</span><span class="p">},</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stages</span><span class="p">[</span><span class="n">name</span><span class="p">]</span><span class="o">.</span><span class="n">tools</span><span class="p">[</span><span class="n">end_tool</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">end_tool</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="s2">&quot;_end_&quot;</span><span class="p">)</span>

        <span class="c1"># Connect the stages</span>
        <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">stage</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">stages</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">for</span> <span class="n">outcome_name</span><span class="p">,</span> <span class="n">outcome_config</span> <span class="ow">in</span> <span class="n">stage</span><span class="o">.</span><span class="n">outcomes</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">outcome_config</span><span class="p">[</span><span class="s2">&quot;move_to&quot;</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span>
                    <span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">stages</span><span class="p">,</span>
                    <span class="n">BACKTRACKING_CONNECTION</span><span class="p">,</span>
                <span class="p">]:</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;Stage &#39;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39; has an outcome leading to an unknown stage &#39;</span><span class="si">{</span><span class="n">outcome_config</span><span class="p">[</span><span class="s1">&#39;move_to&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&#39;&quot;</span>
                    <span class="p">)</span>
                <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                    <span class="s2">&quot;Adding connection&quot;</span><span class="p">,</span>
                    <span class="n">origin</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
                    <span class="n">target</span><span class="o">=</span><span class="n">outcome_config</span><span class="p">[</span><span class="s2">&quot;move_to&quot;</span><span class="p">],</span>
                    <span class="n">outcome</span><span class="o">=</span><span class="n">outcome_name</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">outcome_config</span><span class="p">[</span><span class="s2">&quot;move_to&quot;</span><span class="p">],</span> <span class="n">key</span><span class="o">=</span><span class="n">outcome_name</span><span class="p">)</span>

        <span class="c1"># Find initial stage</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">initial_stage</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">stage</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">stages</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">START_CONNECTION</span> <span class="ow">in</span> <span class="n">stage</span><span class="o">.</span><span class="n">accessible_from</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">initial_stage</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Multiple start stages found!&quot;</span><span class="p">)</span>
                <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Found start stage&quot;</span><span class="p">,</span> <span class="n">stage_name</span><span class="o">=</span><span class="n">name</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">initial_stage</span> <span class="o">=</span> <span class="n">name</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">initial_stage</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;No start stage found!&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">current_stage_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">initial_stage</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">backtracking_stack</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">current_stage</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Shorthand to get the current stage instance.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">stages</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">current_stage_name</span><span class="p">]</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">params</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Given the response&#39;s classification, returns the new system prompt and the tools accessible in this stage.</span>

<span class="sd">        Args:</span>
<span class="sd">            params: The parameters for the tool. Contains the `response_type`.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The new system prompt and the tools accessible in this stage.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">selected_outcome</span> <span class="o">=</span> <span class="n">params</span><span class="p">[</span><span class="s2">&quot;outcome&quot;</span><span class="p">]</span>
        <span class="n">transitions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_external_transitions</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">selected_outcome</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_stage</span><span class="o">.</span><span class="n">outcomes</span> <span class="ow">and</span> <span class="n">selected_outcome</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">transitions</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unknown outcome &#39;</span><span class="si">{</span><span class="n">params</span><span class="p">[</span><span class="s1">&#39;outcome&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&#39; for stage &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">current_stage_name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">selected_outcome</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_stage</span><span class="o">.</span><span class="n">outcomes</span><span class="p">:</span>
            <span class="n">next_stage</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_stage</span><span class="o">.</span><span class="n">outcomes</span><span class="p">[</span><span class="n">params</span><span class="p">[</span><span class="s2">&quot;outcome&quot;</span><span class="p">]][</span><span class="s2">&quot;move_to&quot;</span><span class="p">]</span>

            <span class="k">if</span> <span class="n">next_stage</span> <span class="o">!=</span> <span class="n">BACKTRACKING_CONNECTION</span><span class="p">:</span>
                <span class="c1"># Direct stage to stage connection</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">current_stage_name</span> <span class="o">=</span> <span class="n">next_stage</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># Backtracking connection</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">current_stage_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">backtracking_stack</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Indirect transition, needs to be tracked in the stack</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">backtracking_stack</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">current_stage_name</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">current_stage_name</span> <span class="o">=</span> <span class="n">selected_outcome</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_prompt</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_stage</span><span class="o">.</span><span class="n">tools</span>

    <span class="k">def</span> <span class="nf">get_prompt</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the prompt for the current stage.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">outcomes</span> <span class="o">=</span> <span class="s2">&quot;You need to reach one of these situations:</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;  - </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;description&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">data</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_stage</span><span class="o">.</span><span class="n">outcomes</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
        <span class="p">)</span>
        <span class="n">transitions</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;  - </span><span class="si">{</span><span class="n">stage</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">stages</span><span class="p">[</span><span class="n">stage</span><span class="p">]</span><span class="o">.</span><span class="n">description</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">for</span> <span class="n">stage</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_external_transitions</span><span class="p">()</span>
        <span class="p">)</span>
        <span class="n">template</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_stage</span><span class="o">.</span><span class="n">custom_template</span> <span class="ow">or</span> <span class="n">DEFAULT_PROMPT_TEMPLATE</span>
        <span class="k">return</span> <span class="n">template</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="n">intent_router_tool</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
            <span class="n">stage_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">current_stage_name</span><span class="p">,</span>
            <span class="n">background</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">background</span><span class="p">,</span>
            <span class="n">current_goal</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">current_stage</span><span class="o">.</span><span class="n">goal</span><span class="p">,</span>
            <span class="n">outcomes</span><span class="o">=</span><span class="n">outcomes</span><span class="p">,</span>
            <span class="n">transitions</span><span class="o">=</span><span class="n">transitions</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_external_transitions</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return a list of all the stages that can be reached from the current stage that are not direct connections.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[</span>
            <span class="n">name</span>
            <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">stage</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">stages</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
            <span class="k">if</span> <span class="p">(</span>
                <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">current_stage_name</span> <span class="ow">in</span> <span class="n">stage</span><span class="o">.</span><span class="n">accessible_from</span> <span class="ow">or</span> <span class="s2">&quot;_all_&quot;</span> <span class="ow">in</span> <span class="n">stage</span><span class="o">.</span><span class="n">accessible_from</span><span class="p">)</span>
                <span class="ow">and</span> <span class="n">name</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_stage_name</span>
            <span class="p">)</span>
        <span class="p">]</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h6 id="intentional-core.src.intentional_core.intent_routing.IntentRouter.current_stage" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">current_stage</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#intentional-core.src.intentional_core.intent_routing.IntentRouter.current_stage" class="headerlink" title="Permanent link">#</a></h6>


    <div class="doc doc-contents ">

        <p>Shorthand to get the current stage instance.</p>
    </div>

</div>



<div class="doc doc-object doc-function">


<h6 id="intentional-core.src.intentional_core.intent_routing.IntentRouter.get_external_transitions" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_external_transitions</span><span class="p">()</span></code>

<a href="#intentional-core.src.intentional_core.intent_routing.IntentRouter.get_external_transitions" class="headerlink" title="Permanent link">#</a></h6>


    <div class="doc doc-contents ">

        <p>Return a list of all the stages that can be reached from the current stage that are not direct connections.</p>

            <details class="quote">
              <summary>Source code in <code>intentional-core/src/intentional_core/intent_routing.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_external_transitions</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return a list of all the stages that can be reached from the current stage that are not direct connections.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">[</span>
        <span class="n">name</span>
        <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">stage</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">stages</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
        <span class="k">if</span> <span class="p">(</span>
            <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">current_stage_name</span> <span class="ow">in</span> <span class="n">stage</span><span class="o">.</span><span class="n">accessible_from</span> <span class="ow">or</span> <span class="s2">&quot;_all_&quot;</span> <span class="ow">in</span> <span class="n">stage</span><span class="o">.</span><span class="n">accessible_from</span><span class="p">)</span>
            <span class="ow">and</span> <span class="n">name</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_stage_name</span>
        <span class="p">)</span>
    <span class="p">]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="intentional-core.src.intentional_core.intent_routing.IntentRouter.get_prompt" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_prompt</span><span class="p">()</span></code>

<a href="#intentional-core.src.intentional_core.intent_routing.IntentRouter.get_prompt" class="headerlink" title="Permanent link">#</a></h6>


    <div class="doc doc-contents ">

        <p>Get the prompt for the current stage.</p>

            <details class="quote">
              <summary>Source code in <code>intentional-core/src/intentional_core/intent_routing.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_prompt</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get the prompt for the current stage.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">outcomes</span> <span class="o">=</span> <span class="s2">&quot;You need to reach one of these situations:</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
        <span class="sa">f</span><span class="s2">&quot;  - </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;description&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">data</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_stage</span><span class="o">.</span><span class="n">outcomes</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
    <span class="p">)</span>
    <span class="n">transitions</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
        <span class="sa">f</span><span class="s2">&quot;  - </span><span class="si">{</span><span class="n">stage</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">stages</span><span class="p">[</span><span class="n">stage</span><span class="p">]</span><span class="o">.</span><span class="n">description</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">for</span> <span class="n">stage</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_external_transitions</span><span class="p">()</span>
    <span class="p">)</span>
    <span class="n">template</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_stage</span><span class="o">.</span><span class="n">custom_template</span> <span class="ow">or</span> <span class="n">DEFAULT_PROMPT_TEMPLATE</span>
    <span class="k">return</span> <span class="n">template</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
        <span class="n">intent_router_tool</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
        <span class="n">stage_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">current_stage_name</span><span class="p">,</span>
        <span class="n">background</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">background</span><span class="p">,</span>
        <span class="n">current_goal</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">current_stage</span><span class="o">.</span><span class="n">goal</span><span class="p">,</span>
        <span class="n">outcomes</span><span class="o">=</span><span class="n">outcomes</span><span class="p">,</span>
        <span class="n">transitions</span><span class="o">=</span><span class="n">transitions</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="intentional-core.src.intentional_core.intent_routing.IntentRouter.run" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">run</span><span class="p">(</span><span class="n">params</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#intentional-core.src.intentional_core.intent_routing.IntentRouter.run" class="headerlink" title="Permanent link">#</a></h6>


    <div class="doc doc-contents ">

        <p>Given the response's classification, returns the new system prompt and the tools accessible in this stage.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>params</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Dict">Dict</span>[str, <span title="typing.Any">Any</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The parameters for the tool. Contains the <code>response_type</code>.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The new system prompt and the tools accessible in this stage.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>intentional-core/src/intentional_core/intent_routing.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">params</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given the response&#39;s classification, returns the new system prompt and the tools accessible in this stage.</span>

<span class="sd">    Args:</span>
<span class="sd">        params: The parameters for the tool. Contains the `response_type`.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The new system prompt and the tools accessible in this stage.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">selected_outcome</span> <span class="o">=</span> <span class="n">params</span><span class="p">[</span><span class="s2">&quot;outcome&quot;</span><span class="p">]</span>
    <span class="n">transitions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_external_transitions</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">selected_outcome</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_stage</span><span class="o">.</span><span class="n">outcomes</span> <span class="ow">and</span> <span class="n">selected_outcome</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">transitions</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unknown outcome &#39;</span><span class="si">{</span><span class="n">params</span><span class="p">[</span><span class="s1">&#39;outcome&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&#39; for stage &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">current_stage_name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">selected_outcome</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_stage</span><span class="o">.</span><span class="n">outcomes</span><span class="p">:</span>
        <span class="n">next_stage</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_stage</span><span class="o">.</span><span class="n">outcomes</span><span class="p">[</span><span class="n">params</span><span class="p">[</span><span class="s2">&quot;outcome&quot;</span><span class="p">]][</span><span class="s2">&quot;move_to&quot;</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">next_stage</span> <span class="o">!=</span> <span class="n">BACKTRACKING_CONNECTION</span><span class="p">:</span>
            <span class="c1"># Direct stage to stage connection</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">current_stage_name</span> <span class="o">=</span> <span class="n">next_stage</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Backtracking connection</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">current_stage_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">backtracking_stack</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># Indirect transition, needs to be tracked in the stack</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">backtracking_stack</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">current_stage_name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">current_stage_name</span> <span class="o">=</span> <span class="n">selected_outcome</span>

    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_prompt</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_stage</span><span class="o">.</span><span class="n">tools</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h5 id="intentional-core.src.intentional_core.intent_routing.Stage" class="doc doc-heading">
            <code>Stage</code>


<a href="#intentional-core.src.intentional_core.intent_routing.Stage" class="headerlink" title="Permanent link">#</a></h5>


    <div class="doc doc-contents ">


        <p>Describes a stage in the bot's conversation.</p>






              <details class="quote">
                <summary>Source code in <code>intentional-core/src/intentional_core/intent_routing.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">Stage</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Describes a stage in the bot&#39;s conversation.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">stage_name</span><span class="p">,</span> <span class="n">config</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">custom_template</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;custom_template&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">goal</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;goal&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;description&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">accessible_from</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;accessible_from&quot;</span><span class="p">,</span> <span class="p">[])</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">accessible_from</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">accessible_from</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">accessible_from</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tools</span> <span class="o">=</span> <span class="n">load_tools_from_dict</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;tools&quot;</span><span class="p">,</span> <span class="p">{}))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">outcomes</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;outcomes&quot;</span><span class="p">,</span> <span class="p">{})</span>

        <span class="c1"># If a custom template is given, nothing else is strictly needed</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">custom_template</span><span class="p">:</span>
            <span class="c1"># Make sure the stage has a goal</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">goal</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Stage &#39;</span><span class="si">{</span><span class="n">stage_name</span><span class="si">}</span><span class="s2">&#39; is missing a goal.&quot;</span><span class="p">)</span>
            <span class="c1"># If the stage is accessible from somewhere else than a direct transition, it needs a description</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">accessible_from</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">accessible_from</span> <span class="o">!=</span> <span class="p">[</span><span class="s2">&quot;_start_&quot;</span><span class="p">]</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="s2">&quot;Stages that set the &#39;accessible_from&#39; field also need a description. &quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;&#39;</span><span class="si">{</span><span class="n">stage_name</span><span class="si">}</span><span class="s2">&#39; has &#39;accessible_from&#39; set to </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">accessible_from</span><span class="si">}</span><span class="s2">, but no &#39;description&#39; field.&quot;</span>
                <span class="p">)</span>
        <span class="c1"># Make sure all outcomes have a description</span>
        <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">outcome</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">outcomes</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="s2">&quot;description&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">outcome</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Outcome &#39;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39; in stage &#39;</span><span class="si">{</span><span class="n">stage_name</span><span class="si">}</span><span class="s2">&#39; is missing a description.&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="s2">&quot;move_to&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">outcome</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Outcome &#39;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39; in stage &#39;</span><span class="si">{</span><span class="n">stage_name</span><span class="si">}</span><span class="s2">&#39; is missing a &#39;move_to&#39; field.&quot;</span><span class="p">)</span>

        <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
            <span class="s2">&quot;Stage loaded&quot;</span><span class="p">,</span>
            <span class="n">custom_template</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">custom_template</span><span class="p">,</span>
            <span class="n">stage_goal</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">goal</span><span class="p">,</span>
            <span class="n">stage_description</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">,</span>
            <span class="n">stage_accessible_from</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">accessible_from</span><span class="p">,</span>
            <span class="n">stage_tools</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">tools</span><span class="p">,</span>
            <span class="n">outcomes</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">outcomes</span><span class="p">,</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h4 id="intentional-core.src.intentional_core.llm_client" class="doc doc-heading">
            <code>llm_client</code>


<a href="#intentional-core.src.intentional_core.llm_client" class="headerlink" title="Permanent link">#</a></h4>

    <div class="doc doc-contents ">

        <p>Functions to load LLM client classes from config files.</p>








  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h5 id="intentional-core.src.intentional_core.llm_client.LLMClient" class="doc doc-heading">
            <code>LLMClient</code>


<a href="#intentional-core.src.intentional_core.llm_client.LLMClient" class="headerlink" title="Permanent link">#</a></h5>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="abc.ABC">ABC</span></code>, <code><span title="intentional_core.events.EventEmitter">EventEmitter</span></code></p>


        <p>Tiny base class used to recognize Intentional LLM clients.</p>
<p>In order for your client to be usable, you need to assign a value to the <code>name</code> class variable
in the client class' definition.</p>






              <details class="quote">
                <summary>Source code in <code>intentional-core/src/intentional_core/llm_client.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">LLMClient</span><span class="p">(</span><span class="n">ABC</span><span class="p">,</span> <span class="n">EventEmitter</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Tiny base class used to recognize Intentional LLM clients.</span>

<span class="sd">    In order for your client to be usable, you need to assign a value to the `name` class variable</span>
<span class="sd">    in the client class&#39; definition.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The name of the client. This should be a unique identifier for the client type.</span>
<span class="sd">    This string will be used in configuration files to identify the type of client to serve a LLM from.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">:</span> <span class="s2">&quot;BotStructure&quot;</span><span class="p">,</span> <span class="n">intent_router</span><span class="p">:</span> <span class="n">IntentRouter</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize the LLM client.</span>

<span class="sd">        Args:</span>
<span class="sd">            parent: The parent bot structure.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">intent_router</span> <span class="o">=</span> <span class="n">intent_router</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">connect</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Connect to the LLM.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="s2">&quot;on_llm_connection&quot;</span><span class="p">,</span> <span class="p">{})</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">disconnect</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Disconnect from the LLM.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="s2">&quot;on_llm_disconnection&quot;</span><span class="p">,</span> <span class="p">{})</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">async</span> <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Handle events from the LLM by either processing them internally or by translating them into higher-level</span>
<span class="sd">        events that the BotStructure class can understand, then re-emitting them.</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">async</span> <span class="k">def</span> <span class="nf">send</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Send a unit of data to the LLM. The response is streamed out as an async generator.</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">async</span> <span class="k">def</span> <span class="nf">handle_interruption</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lenght_to_interruption</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Handle an interruption while rendering the output to the user.</span>

<span class="sd">        Args:</span>
<span class="sd">            lenght_to_interruption: The length of the data that was produced to the user before the interruption.</span>
<span class="sd">                This value could be number of characters, number of words, milliseconds, number of audio frames, etc.</span>
<span class="sd">                depending on the bot structure that implements it.</span>
<span class="sd">        &quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h6 id="intentional-core.src.intentional_core.llm_client.LLMClient.name" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">name</span> <span class="o">=</span> <span class="kc">None</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#intentional-core.src.intentional_core.llm_client.LLMClient.name" class="headerlink" title="Permanent link">#</a></h6>


    <div class="doc doc-contents ">

        <p>The name of the client. This should be a unique identifier for the client type.
This string will be used in configuration files to identify the type of client to serve a LLM from.</p>
    </div>

</div>



<div class="doc doc-object doc-function">


<h6 id="intentional-core.src.intentional_core.llm_client.LLMClient.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">intent_router</span><span class="p">)</span></code>

<a href="#intentional-core.src.intentional_core.llm_client.LLMClient.__init__" class="headerlink" title="Permanent link">#</a></h6>


    <div class="doc doc-contents ">

        <p>Initialize the LLM client.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>parent</code>
            </td>
            <td>
                  <code><span title="intentional_core.bot_structures.bot_structure.BotStructure">BotStructure</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The parent bot structure.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>intentional-core/src/intentional_core/llm_client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">:</span> <span class="s2">&quot;BotStructure&quot;</span><span class="p">,</span> <span class="n">intent_router</span><span class="p">:</span> <span class="n">IntentRouter</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initialize the LLM client.</span>

<span class="sd">    Args:</span>
<span class="sd">        parent: The parent bot structure.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">intent_router</span> <span class="o">=</span> <span class="n">intent_router</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="intentional-core.src.intentional_core.llm_client.LLMClient.connect" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">connect</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#intentional-core.src.intentional_core.llm_client.LLMClient.connect" class="headerlink" title="Permanent link">#</a></h6>


    <div class="doc doc-contents ">

        <p>Connect to the LLM.</p>

            <details class="quote">
              <summary>Source code in <code>intentional-core/src/intentional_core/llm_client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">connect</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Connect to the LLM.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="s2">&quot;on_llm_connection&quot;</span><span class="p">,</span> <span class="p">{})</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="intentional-core.src.intentional_core.llm_client.LLMClient.disconnect" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">disconnect</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#intentional-core.src.intentional_core.llm_client.LLMClient.disconnect" class="headerlink" title="Permanent link">#</a></h6>


    <div class="doc doc-contents ">

        <p>Disconnect from the LLM.</p>

            <details class="quote">
              <summary>Source code in <code>intentional-core/src/intentional_core/llm_client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">disconnect</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Disconnect from the LLM.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="s2">&quot;on_llm_disconnection&quot;</span><span class="p">,</span> <span class="p">{})</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="intentional-core.src.intentional_core.llm_client.LLMClient.handle_interruption" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">handle_interruption</span><span class="p">(</span><span class="n">lenght_to_interruption</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#intentional-core.src.intentional_core.llm_client.LLMClient.handle_interruption" class="headerlink" title="Permanent link">#</a></h6>


    <div class="doc doc-contents ">

        <p>Handle an interruption while rendering the output to the user.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>lenght_to_interruption</code>
            </td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The length of the data that was produced to the user before the interruption.
This value could be number of characters, number of words, milliseconds, number of audio frames, etc.
depending on the bot structure that implements it.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>intentional-core/src/intentional_core/llm_client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@abstractmethod</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">handle_interruption</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lenght_to_interruption</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handle an interruption while rendering the output to the user.</span>

<span class="sd">    Args:</span>
<span class="sd">        lenght_to_interruption: The length of the data that was produced to the user before the interruption.</span>
<span class="sd">            This value could be number of characters, number of words, milliseconds, number of audio frames, etc.</span>
<span class="sd">            depending on the bot structure that implements it.</span>
<span class="sd">    &quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="intentional-core.src.intentional_core.llm_client.LLMClient.run" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">run</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#intentional-core.src.intentional_core.llm_client.LLMClient.run" class="headerlink" title="Permanent link">#</a></h6>


    <div class="doc doc-contents ">

        <p>Handle events from the LLM by either processing them internally or by translating them into higher-level
events that the BotStructure class can understand, then re-emitting them.</p>

            <details class="quote">
              <summary>Source code in <code>intentional-core/src/intentional_core/llm_client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@abstractmethod</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handle events from the LLM by either processing them internally or by translating them into higher-level</span>
<span class="sd">    events that the BotStructure class can understand, then re-emitting them.</span>
<span class="sd">    &quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="intentional-core.src.intentional_core.llm_client.LLMClient.send" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">send</span><span class="p">(</span><span class="n">data</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#intentional-core.src.intentional_core.llm_client.LLMClient.send" class="headerlink" title="Permanent link">#</a></h6>


    <div class="doc doc-contents ">

        <p>Send a unit of data to the LLM. The response is streamed out as an async generator.</p>

            <details class="quote">
              <summary>Source code in <code>intentional-core/src/intentional_core/llm_client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@abstractmethod</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">send</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Send a unit of data to the LLM. The response is streamed out as an async generator.</span>
<span class="sd">    &quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>


<div class="doc doc-object doc-function">


<h5 id="intentional-core.src.intentional_core.llm_client.load_llm_client_from_dict" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">load_llm_client_from_dict</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">intent_router</span><span class="p">,</span> <span class="n">config</span><span class="p">)</span></code>

<a href="#intentional-core.src.intentional_core.llm_client.load_llm_client_from_dict" class="headerlink" title="Permanent link">#</a></h5>


    <div class="doc doc-contents ">

        <p>Load a LLM client from a dictionary configuration.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>config</code>
            </td>
            <td>
                  <code><span title="typing.Dict">Dict</span>[str, <span title="typing.Any">Any</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The configuration dictionary.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="intentional-core.src.intentional_core.llm_client.LLMClient" href="#intentional-core.src.intentional_core.llm_client.LLMClient">LLMClient</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The LLMClient instance.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>intentional-core/src/intentional_core/llm_client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">load_llm_client_from_dict</span><span class="p">(</span><span class="n">parent</span><span class="p">:</span> <span class="s2">&quot;BotStructure&quot;</span><span class="p">,</span> <span class="n">intent_router</span><span class="p">:</span> <span class="n">IntentRouter</span><span class="p">,</span> <span class="n">config</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">LLMClient</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Load a LLM client from a dictionary configuration.</span>

<span class="sd">    Args:</span>
<span class="sd">        config: The configuration dictionary.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The LLMClient instance.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Get all the subclasses of LLMClient</span>
    <span class="n">subclasses</span><span class="p">:</span> <span class="n">Set</span><span class="p">[</span><span class="n">LLMClient</span><span class="p">]</span> <span class="o">=</span> <span class="n">inheritors</span><span class="p">(</span><span class="n">LLMClient</span><span class="p">)</span>
    <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Collected LLM client classes&quot;</span><span class="p">,</span> <span class="n">llm_client_classes</span><span class="o">=</span><span class="n">subclasses</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">subclass</span> <span class="ow">in</span> <span class="n">subclasses</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">subclass</span><span class="o">.</span><span class="n">name</span><span class="p">:</span>
            <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
                <span class="s2">&quot;LLM client class &#39;</span><span class="si">%s</span><span class="s2">&#39; does not have a name. This LLM client type will not be usable.&quot;</span><span class="p">,</span>
                <span class="n">subclass</span><span class="p">,</span>
                <span class="n">llm_client_class</span><span class="o">=</span><span class="n">subclass</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="k">continue</span>

        <span class="k">if</span> <span class="n">subclass</span><span class="o">.</span><span class="n">name</span> <span class="ow">in</span> <span class="n">_LLM_CLIENTS</span><span class="p">:</span>
            <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                <span class="s2">&quot;Duplicate LLM client type &#39;</span><span class="si">%s</span><span class="s2">&#39; found. The older class will be replaced by the newly imported one.&quot;</span><span class="p">,</span>
                <span class="n">subclass</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                <span class="n">old_llm_client_name</span><span class="o">=</span><span class="n">subclass</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                <span class="n">old_llm_client_class</span><span class="o">=</span><span class="n">_LLM_CLIENTS</span><span class="p">[</span><span class="n">subclass</span><span class="o">.</span><span class="n">name</span><span class="p">],</span>
                <span class="n">new_llm_client_class</span><span class="o">=</span><span class="n">subclass</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="n">_LLM_CLIENTS</span><span class="p">[</span><span class="n">subclass</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">subclass</span>

    <span class="c1"># Identify the type of bot and see if it&#39;s known</span>
    <span class="n">llm_client_class</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;client&quot;</span><span class="p">)</span>
    <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Creating LLM client&quot;</span><span class="p">,</span> <span class="n">llm_client_class</span><span class="o">=</span><span class="n">llm_client_class</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">llm_client_class</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">_LLM_CLIENTS</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Unknown LLM client type &#39;</span><span class="si">{</span><span class="n">llm_client_class</span><span class="si">}</span><span class="s2">&#39;. Available types: </span><span class="si">{</span><span class="nb">list</span><span class="p">(</span><span class="n">_LLM_CLIENTS</span><span class="p">)</span><span class="si">}</span><span class="s2">. &quot;</span>
            <span class="s2">&quot;Did you forget to install your plugin?&quot;</span>
        <span class="p">)</span>

    <span class="c1"># Handoff to the subclass&#39; init</span>
    <span class="k">return</span> <span class="n">_LLM_CLIENTS</span><span class="p">[</span><span class="n">llm_client_class</span><span class="p">](</span><span class="n">parent</span><span class="o">=</span><span class="n">parent</span><span class="p">,</span> <span class="n">intent_router</span><span class="o">=</span><span class="n">intent_router</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h4 id="intentional-core.src.intentional_core.tools" class="doc doc-heading">
            <code>tools</code>


<a href="#intentional-core.src.intentional_core.tools" class="headerlink" title="Permanent link">#</a></h4>

    <div class="doc doc-contents ">

        <p>Tools baseclass for Intentional.</p>








  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h5 id="intentional-core.src.intentional_core.tools.Tool" class="doc doc-heading">
            <code>Tool</code>


<a href="#intentional-core.src.intentional_core.tools.Tool" class="headerlink" title="Permanent link">#</a></h5>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="abc.ABC">ABC</span></code></p>


        <p>Tools baseclass for Intentional.</p>






              <details class="quote">
                <summary>Source code in <code>intentional-core/src/intentional_core/tools.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">Tool</span><span class="p">(</span><span class="n">ABC</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Tools baseclass for Intentional.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nb">id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">description</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">parameters</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">ToolParameter</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;&lt;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2"> id=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">, description=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="si">}</span><span class="s2">, &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;parameters=</span><span class="si">{</span><span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="p">)</span><span class="si">}</span><span class="s2">&gt;&quot;</span>
        <span class="p">)</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">async</span> <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">params</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Run the tool.</span>
<span class="sd">        &quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h6 id="intentional-core.src.intentional_core.tools.Tool.run" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">run</span><span class="p">(</span><span class="n">params</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#intentional-core.src.intentional_core.tools.Tool.run" class="headerlink" title="Permanent link">#</a></h6>


    <div class="doc doc-contents ">

        <p>Run the tool.</p>

            <details class="quote">
              <summary>Source code in <code>intentional-core/src/intentional_core/tools.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@abstractmethod</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">params</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Run the tool.</span>
<span class="sd">    &quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h5 id="intentional-core.src.intentional_core.tools.ToolParameter" class="doc doc-heading">
            <code>ToolParameter</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#intentional-core.src.intentional_core.tools.ToolParameter" class="headerlink" title="Permanent link">#</a></h5>


    <div class="doc doc-contents ">


        <p>A parameter for an Intentional tool.</p>






              <details class="quote">
                <summary>Source code in <code>intentional-core/src/intentional_core/tools.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span> <span class="nc">ToolParameter</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A parameter for an Intentional tool.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">description</span><span class="p">:</span> <span class="nb">str</span>
    <span class="nb">type</span><span class="p">:</span> <span class="n">Any</span>
    <span class="n">required</span><span class="p">:</span> <span class="nb">bool</span>
    <span class="n">default</span><span class="p">:</span> <span class="n">Any</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;&lt;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2"> name=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">, description=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="si">}</span><span class="s2">, type=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="si">}</span><span class="s2">, &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;required=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">required</span><span class="si">}</span><span class="s2">, default=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">default</span><span class="si">}</span><span class="s2">&gt;&quot;</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>


<div class="doc doc-object doc-function">


<h5 id="intentional-core.src.intentional_core.tools.load_tools_from_dict" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">load_tools_from_dict</span><span class="p">(</span><span class="n">config</span><span class="p">)</span></code>

<a href="#intentional-core.src.intentional_core.tools.load_tools_from_dict" class="headerlink" title="Permanent link">#</a></h5>


    <div class="doc doc-contents ">

        <p>Load a list of tools from a dictionary configuration.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>config</code>
            </td>
            <td>
                  <code><span title="typing.List">List</span>[<span title="typing.Dict">Dict</span>[str, <span title="typing.Any">Any</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The configuration dictionary.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Dict">Dict</span>[str, <a class="autorefs autorefs-internal" title="intentional-core.src.intentional_core.tools.Tool" href="#intentional-core.src.intentional_core.tools.Tool">Tool</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of Tool instances.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>intentional-core/src/intentional_core/tools.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">load_tools_from_dict</span><span class="p">(</span><span class="n">config</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Tool</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Load a list of tools from a dictionary configuration.</span>

<span class="sd">    Args:</span>
<span class="sd">        config: The configuration dictionary.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A list of Tool instances.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Get all the subclasses of Tool</span>
    <span class="n">subclasses</span><span class="p">:</span> <span class="n">Set</span><span class="p">[</span><span class="n">Tool</span><span class="p">]</span> <span class="o">=</span> <span class="n">inheritors</span><span class="p">(</span><span class="n">Tool</span><span class="p">)</span>
    <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Collected tool classes&quot;</span><span class="p">,</span> <span class="n">tool_classes</span><span class="o">=</span><span class="n">subclasses</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">subclass</span> <span class="ow">in</span> <span class="n">subclasses</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">subclass</span><span class="o">.</span><span class="n">id</span><span class="p">:</span>
            <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
                <span class="s2">&quot;Tool class &#39;</span><span class="si">%s</span><span class="s2">&#39; does not have an id. This tool will not be usable.&quot;</span><span class="p">,</span>
                <span class="n">subclass</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span>
                <span class="n">tool_class</span><span class="o">=</span><span class="n">subclass</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="k">continue</span>

        <span class="k">if</span> <span class="n">subclass</span><span class="o">.</span><span class="n">id</span> <span class="ow">in</span> <span class="n">_TOOL_CLASSES</span><span class="p">:</span>
            <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="s2">&quot;Duplicate tool &#39;</span><span class="si">%s</span><span class="s2">&#39; found. The older class will be replaced by the newly imported one.&quot;</span><span class="p">,</span>
                <span class="n">subclass</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
                <span class="n">old_tool_id</span><span class="o">=</span><span class="n">subclass</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
                <span class="n">old_tool_class</span><span class="o">=</span><span class="n">_TOOL_CLASSES</span><span class="p">[</span><span class="n">subclass</span><span class="o">.</span><span class="n">id</span><span class="p">],</span>
                <span class="n">new_tool_class</span><span class="o">=</span><span class="n">subclass</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="n">_TOOL_CLASSES</span><span class="p">[</span><span class="n">subclass</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">subclass</span>

    <span class="c1"># Initialize the tools</span>
    <span class="n">tools</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">tool_config</span> <span class="ow">in</span> <span class="n">config</span><span class="p">:</span>
        <span class="n">tool_id</span> <span class="o">=</span> <span class="n">tool_config</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">tool_id</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Tool definitions must have an &#39;id&#39; field.&quot;</span><span class="p">)</span>
        <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Creating tool&quot;</span><span class="p">,</span> <span class="n">tool_id</span><span class="o">=</span><span class="n">tool_id</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">tool_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">_TOOL_CLASSES</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Unknown tool &#39;</span><span class="si">{</span><span class="n">tool_id</span><span class="si">}</span><span class="s2">&#39;. Available tools: </span><span class="si">{</span><span class="nb">list</span><span class="p">(</span><span class="n">_TOOL_CLASSES</span><span class="p">)</span><span class="si">}</span><span class="s2">. &quot;</span>
                <span class="s2">&quot;Did you forget to install a plugin?&quot;</span>
            <span class="p">)</span>
        <span class="n">tool_instance</span><span class="p">:</span> <span class="n">Tool</span> <span class="o">=</span> <span class="n">_TOOL_CLASSES</span><span class="p">[</span><span class="n">tool_id</span><span class="p">](</span><span class="o">**</span><span class="n">tool_config</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">tool_instance</span><span class="p">,</span> <span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Tool &#39;</span><span class="si">{</span><span class="n">tool_id</span><span class="si">}</span><span class="s2">&#39; must have a name.&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">tool_instance</span><span class="p">,</span> <span class="s2">&quot;description&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Tool &#39;</span><span class="si">{</span><span class="n">tool_id</span><span class="si">}</span><span class="s2">&#39; must have a description.&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">tool_instance</span><span class="p">,</span> <span class="s2">&quot;parameters&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Tool &#39;</span><span class="si">{</span><span class="n">tool_id</span><span class="si">}</span><span class="s2">&#39; must have parameters.&quot;</span><span class="p">)</span>
        <span class="n">tools</span><span class="p">[</span><span class="n">tool_instance</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">tool_instance</span>

    <span class="k">return</span> <span class="n">tools</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h4 id="intentional-core.src.intentional_core.utils" class="doc doc-heading">
            <code>utils</code>


<a href="#intentional-core.src.intentional_core.utils" class="headerlink" title="Permanent link">#</a></h4>

    <div class="doc doc-contents ">

        <p>Utilities for Intentional.</p>








  <div class="doc doc-children">










<div class="doc doc-object doc-module">



<h5 id="intentional-core.src.intentional_core.utils.importing" class="doc doc-heading">
            <code>importing</code>


<a href="#intentional-core.src.intentional_core.utils.importing" class="headerlink" title="Permanent link">#</a></h5>

    <div class="doc doc-contents ">

        <p>Module import functions to handle dynamic plugins import.</p>








  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h6 id="intentional-core.src.intentional_core.utils.importing.import_all_plugins" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">import_all_plugins</span><span class="p">()</span></code>

<a href="#intentional-core.src.intentional_core.utils.importing.import_all_plugins" class="headerlink" title="Permanent link">#</a></h6>


    <div class="doc doc-contents ">

        <p>Imports all the <code>intentional-*</code> packages found in the current environment.</p>

            <details class="quote">
              <summary>Source code in <code>intentional-core/src/intentional_core/utils/importing.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">import_all_plugins</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Imports all the `intentional-*` packages found in the current environment.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">dist</span> <span class="ow">in</span> <span class="n">importlib</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">distributions</span><span class="p">():</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">dist</span><span class="p">,</span> <span class="s2">&quot;_path&quot;</span><span class="p">):</span>
            <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;&#39;_path&#39; not found in &#39;</span><span class="si">%s</span><span class="s2">&#39;, ignoring&quot;</span><span class="p">,</span> <span class="n">dist</span><span class="p">,</span> <span class="n">dist</span><span class="o">=</span><span class="n">dist</span><span class="p">)</span>
        <span class="n">path</span> <span class="o">=</span> <span class="n">dist</span><span class="o">.</span><span class="n">_path</span>  <span class="c1"># pylint: disable=protected-access</span>
        <span class="k">if</span> <span class="n">path</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;intentional_&quot;</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">path</span> <span class="o">/</span> <span class="s2">&quot;top_level.txt&quot;</span><span class="p">):</span>
                <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">path</span> <span class="o">/</span> <span class="s2">&quot;top_level.txt&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">file</span><span class="o">.</span><span class="n">read</span><span class="p">()</span><span class="o">.</span><span class="n">splitlines</span><span class="p">():</span>
                        <span class="n">import_plugin</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">name</span> <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;-&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">import_plugin</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="intentional-core.src.intentional_core.utils.importing.import_plugin" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">import_plugin</span><span class="p">(</span><span class="n">name</span><span class="p">)</span></code>

<a href="#intentional-core.src.intentional_core.utils.importing.import_plugin" class="headerlink" title="Permanent link">#</a></h6>


    <div class="doc doc-contents ">

        <p>Imports the specified package. It does NOT check if this is an Intentional package or not.</p>

            <details class="quote">
              <summary>Source code in <code>intentional-core/src/intentional_core/utils/importing.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">import_plugin</span><span class="p">(</span><span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Imports the specified package. It does NOT check if this is an Intentional package or not.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Importing module&quot;</span><span class="p">,</span> <span class="n">module_name</span><span class="o">=</span><span class="n">name</span><span class="p">)</span>
        <span class="n">module</span> <span class="o">=</span> <span class="n">importlib</span><span class="o">.</span><span class="n">import_module</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="c1"># Print all classes in the module</span>
        <span class="n">class_found</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">inspect</span><span class="o">.</span><span class="n">getmembers</span><span class="p">(</span><span class="n">module</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">inspect</span><span class="o">.</span><span class="n">isclass</span><span class="p">(</span><span class="n">obj</span><span class="p">):</span>
                <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Class found in module&quot;</span><span class="p">,</span> <span class="n">module_name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">found_class</span><span class="o">=</span><span class="n">obj</span><span class="p">)</span>
                <span class="n">class_found</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">class_found</span><span class="p">:</span>
            <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="s2">&quot;No classes found in module: are they imported in the top-level __init__ file of the plugin?&quot;</span><span class="p">,</span>
                <span class="n">module_name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
            <span class="p">)</span>
    <span class="k">except</span> <span class="ne">ModuleNotFoundError</span><span class="p">:</span>
        <span class="n">log</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s2">&quot;Module &#39;</span><span class="si">%s</span><span class="s2">&#39; not found for import, is it installed?&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">module_name</span><span class="o">=</span><span class="n">name</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h5 id="intentional-core.src.intentional_core.utils.inheritance" class="doc doc-heading">
            <code>inheritance</code>


<a href="#intentional-core.src.intentional_core.utils.inheritance" class="headerlink" title="Permanent link">#</a></h5>

    <div class="doc doc-contents ">

        <p>Utils for inheritance checks, to discover subclasses of a base Intentional class.</p>








  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h6 id="intentional-core.src.intentional_core.utils.inheritance.inheritors" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">inheritors</span><span class="p">(</span><span class="n">class_</span><span class="p">,</span> <span class="n">include_abstract</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

<a href="#intentional-core.src.intentional_core.utils.inheritance.inheritors" class="headerlink" title="Permanent link">#</a></h6>


    <div class="doc doc-contents ">

        <p>Find all subclasses of a class, regardless of depth.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>class_</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The class to find subclasses of.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>include_abstract</code>
            </td>
            <td>
                  <code>bool</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to include abstract classes in the results.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>intentional-core/src/intentional_core/utils/inheritance.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">inheritors</span><span class="p">(</span><span class="n">class_</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="n">include_abstract</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Set</span><span class="p">[</span><span class="n">Any</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Find all subclasses of a class, regardless of depth.</span>

<span class="sd">    Args:</span>
<span class="sd">        class_: The class to find subclasses of.</span>
<span class="sd">        include_abstract: Whether to include abstract classes in the results.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">subclasses</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
    <span class="n">to_process</span> <span class="o">=</span> <span class="p">[</span><span class="n">class_</span><span class="p">]</span>
    <span class="k">while</span> <span class="n">to_process</span><span class="p">:</span>
        <span class="n">parent</span> <span class="o">=</span> <span class="n">to_process</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="n">parent</span><span class="o">.</span><span class="n">__subclasses__</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">child</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">subclasses</span><span class="p">:</span>
                <span class="n">to_process</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">child</span><span class="p">)</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">include_abstract</span> <span class="ow">and</span> <span class="n">inspect</span><span class="o">.</span><span class="n">isabstract</span><span class="p">(</span><span class="n">child</span><span class="p">):</span>
                    <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                        <span class="s2">&quot;Skipping abstract class from inheritor&#39;s list.&quot;</span><span class="p">,</span>
                        <span class="n">abstract_class</span><span class="o">=</span><span class="n">child</span><span class="p">,</span>
                        <span class="n">abstract_methods</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="n">child</span><span class="o">.</span><span class="n">__abstractmethods__</span><span class="p">),</span>
                    <span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">subclasses</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">child</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">subclasses</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>


  </div>

    </div>

</div>


  </div>

    </div>

</div>


  </div>

    </div>

</div>


  </div>

    </div>

</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.88dd0f4e.min.js"></script>
      
    
  </body>
</html>